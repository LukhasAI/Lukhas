{"openapi":"3.1.0","info":{"title":"LUKHAS API","description":"Governed tool loop, auditability, feedback LUT, and safety modes.","contact":{"name":"LUKHAS AI Team","url":"https://github.com/LukhasAI/Lukhas"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8000","description":"Local development"},{"url":"https://api.lukhas.ai","description":"Production"}],"paths":{"/generate-dream/":{"post":{"summary":"Generate Dream","description":"Generate a symbolic dream","operationId":"generate_dream_generate_dream__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DreamRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DreamResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/glyph-feedback/":{"post":{"summary":"Glyph Feedback","description":"Provide glyph adjustment suggestions","operationId":"glyph_feedback_glyph_feedback__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GlyphFeedbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GlyphFeedbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tier-auth/":{"post":{"summary":"Tier Auth","description":"Resolve symbolic token to access rights","operationId":"tier_auth_tier_auth__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TierAuthRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TierAuthResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/plugin-load/":{"post":{"summary":"Plugin Load","description":"Register plugin symbols with persistence","operationId":"plugin_load_plugin_load__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PluginLoadRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PluginLoadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/memory-dump/":{"get":{"summary":"Memory Dump","description":"Export symbolic folds and emotional state from memory subsystem","operationId":"memory_dump_memory_dump__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemoryDumpResponse"}}}}}}},"/openai/chat":{"post":{"tags":["openai"],"summary":"Modulated Chat","description":"Generate a response via OpenAI with LUKHAS modulation applied","operationId":"modulated_chat_openai_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModulatedChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModulatedChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/openai/chat/stream":{"post":{"tags":["openai"],"summary":"Modulated Chat Stream","description":"Stream a response via OpenAI with LUKHAS modulation applied","operationId":"modulated_chat_stream_openai_chat_stream_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ModulatedChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/openai/metrics":{"get":{"tags":["openai"],"summary":"Openai Metrics","operationId":"openai_metrics_openai_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/feedback/capture":{"post":{"tags":["feedback"],"summary":"Capture Feedback","description":"Capture user feedback for an AI action.\n\nThis endpoint allows users to rate AI responses and provide feedback,\nwhich is used for continuous alignment and learning.","operationId":"capture_feedback_feedback_capture_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedbackResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/feedback/batch":{"post":{"tags":["feedback"],"summary":"Capture Batch Feedback","description":"Capture multiple feedback cards at once.\n\nUseful for batch processing of user feedback sessions.","operationId":"capture_batch_feedback_feedback_batch_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/FeedbackRequest"},"type":"array","title":"Requests"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/FeedbackResponse"},"type":"array","title":"Response Capture Batch Feedback Feedback Batch Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/feedback/report/{user_id}":{"get":{"tags":["feedback"],"summary":"Get Learning Report","description":"Get a learning report for a specific user.\n\nThis report explains what the system has learned from the user's feedback,\nincluding preferences, patterns, and recommendations.","operationId":"get_learning_report_feedback_report__user_id__get","parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LearningReportResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/feedback/metrics":{"get":{"tags":["feedback"],"summary":"Get System Metrics","description":"Get overall feedback system metrics.\n\nProvides insights into the feedback system's operation and learning progress.","operationId":"get_system_metrics_feedback_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemMetricsResponse"}}}}}}},"/feedback/trigger-learning":{"post":{"tags":["feedback"],"summary":"Trigger Learning","description":"Manually trigger pattern extraction and policy updates.\n\nThis endpoint triggers the learning process to extract patterns from\nrecent feedback and generate policy updates.","operationId":"trigger_learning_feedback_trigger_learning_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/feedback/health":{"get":{"tags":["feedback"],"summary":"Health Check","description":"Health check for feedback system.","operationId":"health_check_feedback_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/matriz/trace/health":{"get":{"summary":"Trace system health check","description":"Check if the trace storage provider is functioning properly","operationId":"trace_health_v1_matriz_trace_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/matriz/trace/recent":{"get":{"summary":"Get recent traces","description":"Retrieve recent traces with optional filtering by level or tag","operationId":"get_recent_traces_v1_matriz_trace_recent_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}},{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Level"}},{"name":"tag","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tag"}},{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ExecutionTraceResponse"},"title":"Response Get Recent Traces V1 Matriz Trace Recent Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/matriz/trace/{trace_id}":{"get":{"summary":"Get trace by ID","description":"Retrieve a specific trace by its unique identifier. Requires valid API key if configured.","operationId":"get_trace_v1_matriz_trace__trace_id__get","parameters":[{"name":"trace_id","in":"path","required":true,"schema":{"type":"string","title":"Trace Id"}},{"name":"x-api-key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Api-Key"}}],"responses":{"200":{"description":"Trace found and returned successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExecutionTraceResponse"}}}},"400":{"description":"Invalid trace ID format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TraceValidationErrorResponse"}}}},"401":{"description":"Unauthorized - invalid API key","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TraceErrorResponse"}}}},"404":{"description":"Trace not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TraceNotFoundResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TraceErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/healthz":{"get":{"summary":"Healthz","description":"Health check endpoint for monitoring.","operationId":"healthz_healthz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"DreamRequest":{"properties":{"symbols":{"items":{"type":"string"},"type":"array","title":"Symbols"}},"type":"object","required":["symbols"],"title":"DreamRequest"},"DreamResponse":{"properties":{"dream":{"type":"string","title":"Dream"},"driftScore":{"type":"number","title":"Driftscore"},"affect_delta":{"type":"number","title":"Affect Delta"}},"type":"object","required":["dream","driftScore","affect_delta"],"title":"DreamResponse"},"ExecutionTraceResponse":{"properties":{"trace_id":{"type":"string","title":"Trace Id","description":"Unique trace identifier"},"timestamp":{"type":"string","title":"Timestamp","description":"ISO 8601 timestamp when trace was created"},"unix_time":{"type":"number","title":"Unix Time","description":"Unix timestamp for efficient sorting"},"level":{"type":"integer","title":"Level","description":"Trace level (0-7)"},"level_name":{"type":"string","title":"Level Name","description":"Human-readable trace level name"},"message":{"type":"string","title":"Message","description":"Main trace message"},"source_component":{"type":"string","title":"Source Component","description":"Component that generated the trace"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Categorization tags"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","description":"Additional structured data"},"emotional":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Emotional","description":"Emotional valence data"},"ethical_score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Ethical Score","description":"Ethical evaluation score (0-1)"},"execution_context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Execution Context","description":"Execution environment context"},"performance_metrics":{"anyOf":[{"additionalProperties":{"type":"number"},"type":"object"},{"type":"null"}],"title":"Performance Metrics","description":"Performance timing and resource usage"},"related_traces":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Related Traces","description":"IDs of related traces in the execution chain"}},"type":"object","required":["trace_id","timestamp","unix_time","level","level_name","message","source_component"],"title":"ExecutionTraceResponse","description":"Enhanced response model for execution trace entries with full context."},"FeedbackRequest":{"properties":{"action_id":{"type":"string","title":"Action Id","description":"ID of the action being rated"},"rating":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Rating","description":"Rating from 1-5"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note","description":"Optional text feedback"},"symbols":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Symbols","description":"User-selected symbols"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context","description":"Additional context"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id","description":"User ID (will be hashed)"}},"type":"object","required":["action_id","rating"],"title":"FeedbackRequest","description":"Request model for capturing feedback."},"FeedbackResponse":{"properties":{"card_id":{"type":"string","title":"Card Id"},"rating":{"type":"integer","title":"Rating"},"timestamp":{"type":"number","title":"Timestamp"},"message":{"type":"string","title":"Message","default":"Feedback captured successfully"}},"type":"object","required":["card_id","rating","timestamp"],"title":"FeedbackResponse","description":"Response model for feedback capture."},"GlyphFeedbackRequest":{"properties":{"driftScore":{"type":"number","title":"Driftscore"},"collapseHash":{"type":"string","title":"Collapsehash"}},"type":"object","required":["driftScore","collapseHash"],"title":"GlyphFeedbackRequest"},"GlyphFeedbackResponse":{"properties":{"suggestions":{"items":{"type":"string"},"type":"array","title":"Suggestions"}},"type":"object","required":["suggestions"],"title":"GlyphFeedbackResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LearningReportResponse":{"properties":{"user_id_hash":{"type":"string","title":"User Id Hash"},"total_feedback_cards":{"type":"integer","title":"Total Feedback Cards"},"overall_satisfaction":{"type":"number","title":"Overall Satisfaction"},"improvement_trend":{"type":"number","title":"Improvement Trend"},"preferred_styles":{"items":{"type":"string"},"type":"array","title":"Preferred Styles"},"summary":{"type":"string","title":"Summary"},"recommendations":{"additionalProperties":true,"type":"object","title":"Recommendations"}},"type":"object","required":["user_id_hash","total_feedback_cards","overall_satisfaction","improvement_trend","preferred_styles","summary","recommendations"],"title":"LearningReportResponse","description":"Response model for learning report."},"MemoryDumpResponse":{"properties":{"folds":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Folds"},"emotional_state":{"additionalProperties":{"type":"number"},"type":"object","title":"Emotional State"}},"type":"object","required":["folds","emotional_state"],"title":"MemoryDumpResponse"},"ModulatedChatRequest":{"properties":{"prompt":{"type":"string","title":"Prompt"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context"},"task":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Task"}},"type":"object","required":["prompt"],"title":"ModulatedChatRequest"},"ModulatedChatResponse":{"properties":{"content":{"type":"string","title":"Content"},"raw":{"additionalProperties":true,"type":"object","title":"Raw"},"modulation":{"additionalProperties":true,"type":"object","title":"Modulation"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"}},"type":"object","required":["content","raw","modulation","metadata"],"title":"ModulatedChatResponse"},"PluginLoadRequest":{"properties":{"symbols":{"items":{"type":"string"},"type":"array","title":"Symbols"}},"type":"object","required":["symbols"],"title":"PluginLoadRequest"},"PluginLoadResponse":{"properties":{"status":{"type":"string","title":"Status"}},"type":"object","required":["status"],"title":"PluginLoadResponse"},"SystemMetricsResponse":{"properties":{"cards_captured":{"type":"integer","title":"Cards Captured"},"patterns_identified":{"type":"integer","title":"Patterns Identified"},"policies_updated":{"type":"integer","title":"Policies Updated"},"validations_passed":{"type":"integer","title":"Validations Passed"},"validations_failed":{"type":"integer","title":"Validations Failed"},"total_cards":{"type":"integer","title":"Total Cards"},"total_patterns":{"type":"integer","title":"Total Patterns"},"total_updates":{"type":"integer","title":"Total Updates"}},"type":"object","required":["cards_captured","patterns_identified","policies_updated","validations_passed","validations_failed","total_cards","total_patterns","total_updates"],"title":"SystemMetricsResponse","description":"Response model for system metrics."},"TierAuthRequest":{"properties":{"token":{"type":"string","title":"Token"}},"type":"object","required":["token"],"title":"TierAuthRequest"},"TierAuthResponse":{"properties":{"access_rights":{"items":{"type":"string"},"type":"array","title":"Access Rights"},"tier":{"type":"integer","title":"Tier"}},"type":"object","required":["access_rights","tier"],"title":"TierAuthResponse"},"TraceErrorResponse":{"properties":{"error":{"type":"string","title":"Error","description":"Error type"},"message":{"type":"string","title":"Message","description":"Human-readable error message"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details","description":"Additional error context"}},"type":"object","required":["error","message"],"title":"TraceErrorResponse","description":"Response model for general trace API errors."},"TraceNotFoundResponse":{"properties":{"error":{"type":"string","title":"Error","description":"Error type","default":"trace_not_found"},"message":{"type":"string","title":"Message","description":"Human-readable error message"},"trace_id":{"type":"string","title":"Trace Id","description":"The trace ID that was not found"}},"type":"object","required":["message","trace_id"],"title":"TraceNotFoundResponse","description":"Response model for trace not found errors."},"TraceValidationErrorResponse":{"properties":{"error":{"type":"string","title":"Error","description":"Error type","default":"validation_error"},"message":{"type":"string","title":"Message","description":"Human-readable error message"},"field":{"type":"string","title":"Field","description":"Field that failed validation"},"value":{"type":"string","title":"Value","description":"Invalid value provided"}},"type":"object","required":["message","field","value"],"title":"TraceValidationErrorResponse","description":"Response model for validation errors."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}