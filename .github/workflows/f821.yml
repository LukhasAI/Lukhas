name: f821-undefined-names
on:
  schedule:
    - cron: '25 3 * * *'
  workflow_dispatch: {}
jobs:
  f821:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@692973e3d937129bcbf40652eb9f2f61becf3332
      - uses: actions/setup-python@82c7e631bb3cdc910f68e0081d67478d79c6982d
        with:
          python-version: "3.11"
      - name: Install ruff
        run: python -m pip install ruff
      - name: F821 audit
        run: |
          python tools/ci/f821_report.py --paths "lukhas MATRIZ candidate" --enforce-core
      - name: Upload artifacts
        if: always()
        uses: actions/upload-artifact@834a144ee995460fba8ed112a2fc961b36a5ec5a
        with:
          name: f821-report
          path: |
            reports/audit/f821.json
            reports/audit/f821_summary.md
