# ðŸ”Ž Audit Readme (Start Here)

Welcome! This repository is in **Audit Mode**.

## What to review first
1. Latest snapshot: `docs/audits/live/<most-recent>/INDEX.md`
2. OpenAPI: `docs/openapi/lukhas-openapi.json` (generated by CI)
3. Health: `docs/audits/health/latest.{json,md}` (if present)
4. Lanes: `docs/lanes/README.md` + `schema/module.lane.schema.json`

## Architectural map
- OpenAI faÃ§ade: `serve/openai_routes.py`, `serve/main.py`
- Auth/Guardian: `lukhas/governance/`, `serve/main.py` (auth middleware)
- Rate limiting & idempotency: `lukhas/core/reliability/*` (if available)
- Observability: `lukhas/observability/*`, `enterprise/observability/`
- MATRIZ engine integration points: `matriz/`

## Known invariants
- Error envelope: OpenAI-compatible
- Headers: `X-Trace-Id`, `X-RateLimit-*` (aliases supported)
- Guardian: permissive by default, PDP wired
- Health endpoints: `/healthz` (primary), `/health` (alias)

## Questions we want answered
- API parity gaps vs. OpenAI (endpoints, headers, semantics)?
- Reliability posture (idempotency, rate limits, backoff hints)?
- Security posture (authn/z, secret handling, headers, CSP)?
- Observability (traces/metrics/logs completeness)?
- Lane hygiene (imports across lanes, manifest drift)?
- DX polish (SDKs, examples, Postman, README accuracy)?

## How to regenerate the snapshot
- CI: run the **Audit Snapshot** workflow (Actions tab)
- Local: `make audit-snapshot`

## Audit configuration

For strictest validation mode:
```bash
# Load audit environment
export $(grep -v '^#' .env.audit | xargs)

# Start server
uvicorn serve.main:app --host 0.0.0.0 --port 8000 --reload
```

See `.env.audit` for full configuration (strict Guardian, rate limiting, log redaction, trace headers).

## Audit artifacts

### Comprehensive Audit Pack
- Location: `docs/audits/auditpack/<timestamp>/`
- Generate: `make audit-pack`
- Contains: OpenAPI spec, health snapshots, RC soak results, dependencies, lint stats, CI config, Postman collections

### Live Snapshots
- Location: `docs/audits/live/<run_id>/`
- Generate: `make audit-snapshot` (local) or run CI workflow
- Contains: Ruff baseline, OpenAPI validation, manifest checks, health audit

### RC Soak Test Results
- Location: `docs/audits/health/<date>/RC_SOAK_TEST_RESULTS.md`
- Latest validation: 100% success rate on synthetic load (50/50 requests)
- Endpoints tested: `/v1/embeddings`, `/v1/chat/completions`, `/healthz`

## Research brief

See `docs/audits/RESEARCH_BRIEF.md` for detailed scope, key questions, and expected deliverables.

## Contact

- Repository: https://github.com/LukhasAI/Lukhas
- Issues: https://github.com/LukhasAI/Lukhas/issues
