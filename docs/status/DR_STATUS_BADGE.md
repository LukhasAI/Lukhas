---
status: wip
type: documentation
owner: unknown
module: status
redirect: false
moved_to: null
---

# Backup & DR Status Badge

This repository generates an SVG badge that reflects the current Backup & Disaster Recovery posture based on workflow KPIs.

- Badge path: `badges/backup_status.svg`
- Generated by: `scripts/kpi_badge.py` from `out/backup_kpi.json`
- Updated in: Weekly (dry-run), Monthly (dry-run), and Quarterly (full-restore) workflows

## What it shows

Status is computed from workflow outputs:
- green: weekly.ok AND monthly.ok
- amber: exactly one of weekly.ok or monthly.ok is true
- red: neither weekly nor monthly ok
- downgrade: if quarterly is present and not ok, green→amber or amber→red

The KPI JSON (`out/backup_kpi.json`) is produced by `scripts/report_kpi_backup.py` and includes ok flags for weekly/monthly and metrics for quarterly.

## How it’s updated

Each DR workflow runs these steps near the end:
1. Generate KPI JSON
2. Render badge
3. Commit badge on main (scheduled/dispatch runs only)

## Embed in README

Add this to your top-level `README.md` to display the live badge on GitHub:

```markdown
[![Backup & DR Status](badges/backup_status.svg)](docs/DR_STATUS_BADGE.md)
```

GitHub serves the SVG directly when viewing the repository. For external docs, you can reference the raw URL:

```
https://raw.githubusercontent.com/LukhasAI/Lukhas/main/badges/backup_status.svg
```

## Inputs and secrets

- Required (for DR workflows):
  - `BACKUP_AWS_ROLE_ARN`, `BACKUP_AWS_REGION`, `BACKUP_S3_BUCKET`
- Optional:
  - `SLACK_WEBHOOK_URL` for failure notifications

No secrets are required specifically for the badge; it depends on KPI JSON generated by DR workflows.

## Local reproduction (optional)

You can render the badge locally if you have KPI JSON files (from artifacts or local runs):

```bash
python scripts/report_kpi_backup.py \
  --weekly out/dr_dryrun_weekly.json \
  --monthly out/dr_dryrun_result.json \
  --quarterly out/dr_fullrestore_summary.json \
  | tee out/backup_kpi.json

python scripts/kpi_badge.py --in out/backup_kpi.json --out badges/backup_status.svg
```

## Related docs

- `docs/BACKUP_DR.md` — Backup/Restore runbook
- `docs/ADMIN_DASHBOARD.md` — Admin UI and performance trends
