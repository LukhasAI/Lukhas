# LUKHAS AI System Context - Claude Code Master Reference
# Architecture: Constellation Framework + MATRIZ Pipeline
# Version: Elite/T4 Implementation
# Files: 43,503 Python | Directories: 173 root | Context Files: 200+

---

## ğŸ¯ CRITICAL ARCHITECTURE FACTS

### **Framework: CONSTELLATION (NOT Trinity)**
**8 Dynamic Stars** (expandable to infinite via MATRIZ nodes):

1. **âš›ï¸ Identity** (Anchor Star)
   - Î›iD authentication, namespace management
   - <100ms p95 latency, multi-tier auth
   - WebAuthn/FIDO2, cross-device sync
   
2. **âœ¦ Memory** (Trail Star)
   - Fold-based memory, 1000-fold limit
   - 99.7% cascade prevention, temporal organization
   - Consciousness-memory coupling

3. **ğŸ”¬ Vision** (Horizon Star)
   - Pattern recognition, adaptive interfaces
   - Perceptual awareness, NLP processing
   
4. **ğŸŒ± Bio** (Living Star)
   - Adaptive bio-symbolic processing
   - Cellular dynamics, neural resonance
   - System resilience patterns

5. **ğŸŒ™ Dream** (Drift Star)
   - Creative consciousness expansion
   - Symbolic recombination, emergence
   - Controlled chaos generation

6. **âš–ï¸ Ethics** (North Star)
   - Constitutional AI, democratic oversight
   - 0.15 drift threshold, guardian integration
   
7. **ğŸ›¡ï¸ Guardian** (Watch Star)
   - Safety compliance, cascade prevention
   - 99.7% violation prevention, dignity protection

8. **âš›ï¸ Quantum** (Ambiguity Star)
   - Quantum-inspired uncertainty management
   - Superposition metaphors, coherence preservation

**Key Point:** Changes RIPPLE through constellation (not cascade hierarchically)

---

### **MATRIZ Pipeline: M-A-T-R-I-A**
**Non-Linear, Multi-Dimensional Processing:**

```
Memory â†’ Attention â†’ Thought â†’ Risk â†’ Intent â†’ Action
  âœ¦         ğŸ”¬         ğŸ§        ğŸ›¡ï¸      âš›ï¸       ğŸ“¤
  â”‚         â”‚          â”‚        â”‚       â”‚        â”‚
Fold    â†’ Pattern  â†’ Symbolic â†’ Ethics â†’ Î›iD  â†’ Response
Based   â†’ Focus    â†’ Reasoning â†’ Check  â†’ Auth â†’ Generation
```

**SLO:** <250ms end-to-end pipeline processing  
**Architecture:** 20 Python files + 16,042 frontend assets (632MB)  
**Design:** Registry-based plugins, constructor-aware instantiation

---

### **qi/ NOT quantum/**
**Quantum-INSPIRED Classical Computation:**

```python
# âœ… CORRECT - qi/ usage
from qi.inspiration import QiInspiration
qi = QiInspiration(
    inspiration_source='quantum_mechanics',
    implementation='classical_computation'
)

# âŒ WRONG - quantum/ usage
from quantum.gates import QuantumGate  # Does NOT exist
```

**Key Concepts:**
- Superposition â†’ Multi-state representation (metaphor)
- Entanglement â†’ Correlation patterns (metaphor)
- Coherence â†’ Pattern consistency (metaphor)
- Observation â†’ State resolution (metaphor)

**NOT:** Quantum gates, qubits, quantum computers

---

### **Non-Hierarchical Matriz Architecture**
**Graph Structure, NOT Tree:**

```python
# âŒ WRONG - Hierarchical thinking
parent.children.append(child)
cascade_down_hierarchy(parent)

# âœ… CORRECT - Matriz graph
node_a.correlate_with(node_b)
ripple_through_constellation(node_a)
analyze_multi_dimensional_impact(node_a)
```

**Characteristics:**
- Nodes are peers in constellation
- No parent-child relationships
- Multi-directional ripples, not cascades
- Dynamic correlations, not fixed hierarchies
- Emergence from interactions, not top-down control

---

## ğŸ—ºï¸ Development Pipeline

### **CANDIDATE â†’ LUKHAS â†’ PRODUCTS**

```
Research & Development â†’ Integration & Testing â†’ Production Deployment
     (CANDIDATE)              (LUKHAS)              (PRODUCTS)
     2,877 files             148 files             4,093 files
          â”‚                      â”‚                      â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚Consciousnessâ”‚        â”‚Constellationâ”‚       â”‚Enterprise â”‚
   â”‚Memory       â”‚   â†’    â”‚Framework   â”‚   â†’   â”‚Intelligenceâ”‚
   â”‚Identity     â”‚        â”‚Integration â”‚       â”‚Experience â”‚
   â”‚Governance   â”‚        â”‚Registry    â”‚       â”‚Security   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ Key Directory Structure

### **Lane System:**
- **L0:** Research foundations (consciousness/, memory/, identity/)
- **L1:** Development workspace (candidate/)
- **L2:** Integration layer (lukhas/, qi/)
- **L3:** Production systems (products/)

### **Critical Paths:**

```
/Lukhas/
â”œâ”€â”€ candidate/                    # L1 - Development (2,877 files)
â”‚   â”œâ”€â”€ aka_qualia/              # Consciousness core (43KB core.py)
â”‚   â”œâ”€â”€ core/                    # Components (193 subdirs, 1,029+ files)
â”‚   â”‚   â”œâ”€â”€ orchestration/       # Multi-agent (266 files)
â”‚   â”‚   â”œâ”€â”€ interfaces/          # APIs (190 files)
â”‚   â”‚   â””â”€â”€ symbolic/            # Reasoning (71 files)
â”‚   â”œâ”€â”€ consciousness/           # Development (52+ components)
â”‚   â”œâ”€â”€ memory/                  # Memory systems
â”‚   â”œâ”€â”€ identity/                # Î›iD development
â”‚   â””â”€â”€ governance/              # Policy development
â”‚
â”œâ”€â”€ lukhas/                      # L2 - Integration (148 files)
â”‚   â”œâ”€â”€ consciousness/           # Constellation integration
â”‚   â”œâ”€â”€ memory/                  # Fold system integration
â”‚   â”œâ”€â”€ identity/                # Î›iD integration
â”‚   â””â”€â”€ core/                    # Integration systems
â”‚
â”œâ”€â”€ matriz/                      # Cognitive DNA Engine
â”‚   â”œâ”€â”€ core/                    # Node orchestration (20 files)
â”‚   â””â”€â”€ visualization/           # 16,042 assets (632MB)
â”‚
â”œâ”€â”€ qi/                          # L2 - Quantum-inspired (14 entrypoints)
â”‚   â”œâ”€â”€ attention/               # Attention economics
â”‚   â”œâ”€â”€ bio/                     # Bio integration
â”‚   â””â”€â”€ coordination/            # qi coordination
â”‚
â”œâ”€â”€ products/                    # L3 - Production (4,093 files)
â”‚   â”œâ”€â”€ enterprise/              # Scale, compliance
â”‚   â”œâ”€â”€ intelligence/            # Analytics, monitoring
â”‚   â””â”€â”€ experience/              # UX, dashboards
â”‚
â”œâ”€â”€ consciousness/               # L0 - Research foundation
â”œâ”€â”€ memory/                      # L0 - Memory research
â”œâ”€â”€ identity/                    # L0 - Identity research
â””â”€â”€ ethics/                      # Constitutional AI (33+ components)
```

---

## ğŸ¯ Performance Constraints

### **Critical SLOs:**
- **Memory Operations:** <100ms p95 latency
- **Authentication:** <100ms p95 (Î›iD)
- **MATRIZ Pipeline:** <250ms end-to-end
- **Identity Coherence:** <50ms synchronization
- **Cascade Prevention:** 99.7% success rate
- **Ethics Drift:** <0.15 threshold
- **Guardian Compliance:** >0.8 minimum

### **System Metrics:**
- **Consciousness Components:** 692 modules
- **Constellation Mapping:** 476 components, 189 clusters
- **Memory Architecture:** 1000-fold limit, 0/100 cascades observed
- **Integration Status:** 71.4% â†’ 100% roadmap

---

## ğŸ”§ Development Patterns

### **1. Constellation-Aware Development**
```python
async def develop_feature(feature_request):
    # 1. Analyze constellation impact
    stars = analyze_constellation_impact(feature_request)
    # Returns: ['memory', 'vision', 'quantum']
    
    # 2. Calculate matriz position
    position = calculate_matriz_position(feature_request)
    # Returns: {constellation_coordinates, pipeline_stage, lane_level}
    
    # 3. Check ripple effects
    ripples = analyze_ripple_effects(position)
    # Returns: {first_order: 3, qi_entangled: 7, safe: True}
    
    # 4. Validate lane boundaries
    lane = determine_lane(position)
    # Returns: 'L1' (candidate development)
    
    # 5. Generate with full context
    return generate_constellation_aware_code(
        feature_request,
        stars=stars,
        position=position,
        ripples=ripples,
        lane=lane
    )
```

### **2. Context Discovery**
```python
def find_relevant_contexts(file_path):
    """Auto-discover relevant lukhas_context.md files"""
    # Local context
    local = find_context_in_directory(file_path)
    
    # Constellation contexts
    stars = detect_constellation_involvement(file_path)
    constellation = [
        find_context_for_star(star) for star in stars
    ]
    
    # Lane context
    lane = determine_lane_from_path(file_path)
    lane_context = find_lane_context(lane)
    
    return {
        'local': local,
        'constellation': constellation,
        'lane': lane_context,
        'total_files': 200+  # lukhas_context.md everywhere
    }
```

### **3. Ripple Analysis**
```python
async def analyze_change_ripples(change):
    """Analyze how change propagates through constellation"""
    # NOT hierarchical cascade - constellation ripples
    return {
        'epicenter': identify_epicenter_star(change),
        'first_order': find_direct_connections(change),
        'qi_entangled': find_quantum_inspired_correlations(change),
        'emergence': calculate_emergence_potential(change),
        'safe': validate_cascade_prevention(change)  # 99.7%
    }
```

---

## ğŸ“Š Current Status

### **Integration Progress: 71.4% â†’ 100%**
- âœ… Schema v2.0.0 comprehensive audit (100% validation)
- âœ… Constellation Framework active (8 stars)
- âœ… 692 consciousness modules integrated
- âœ… Constitutional AI active (33+ components)
- âœ… MATRIZ pipeline operational
- ğŸ”„ Production optimization ongoing

### **Phase Roadmap:**
1. **Phase 1 (71.4% â†’ 85%):** GLYPH integration, voice systems
2. **Phase 2 (85% â†’ 95%):** MÎ›TRIZ consciousness (692 modules)
3. **Phase 3 (95% â†’ 100%):** Enterprise scaling, compliance

---

## ğŸš¨ Common Mistakes to Avoid

### **Terminology:**
- âŒ "Constellation Framework (8 Stars)" â†’ âœ… "Constellation Framework"
- âŒ "quantum/" directory â†’ âœ… "qi/" directory
- âŒ "Three domains" â†’ âœ… "Eight constellation stars"
- âŒ "Hierarchy" â†’ âœ… "Matriz graph"
- âŒ "Cascade" â†’ âœ… "Ripple"
- âŒ "Parent-child" â†’ âœ… "Node correlation"

### **Architecture:**
- âŒ Hierarchical tree thinking
- âŒ Top-down control flow
- âŒ Fixed domain boundaries
- âŒ Quantum gate implementation (qi/ is inspired!)

### **Development:**
- âŒ Ignoring lane boundaries
- âŒ Missing constellation impact analysis
- âŒ Violating performance SLOs
- âŒ Creating cascades (must prevent)

---

## ğŸ“ Quick Reference

### **Check Constellation Position:**
```bash
claude analyze --constellation file.py
# Output: Memory âœ¦, Vision ğŸ”¬ (MATRIZ: Attention, Lane: L2)
```

### **Validate Ripples:**
```bash
claude validate --ripples change.py
# Output: Safe (3 first-order, 7 qi-entangled, no cascades)
```

### **Find Contexts:**
```bash
claude context --auto file.py
# Output: 7 relevant lukhas_context.md files loaded
```

---

## ğŸ“š Documentation Hierarchy

1. **This File:** Master system context
2. **Root:** `~/Lukhas/lukhas_context.md` (master overview)
3. **Constellation:** `~/Lukhas/consciousness/docs/CONSTELLATION_FRAMEWORK_GUIDE.md`
4. **MATRIZ:** `~/Lukhas/matriz/lukhas_context.md`
5. **qi/:** `~/Lukhas/qi/lukhas_context.md`
6. **Local:** `lukhas_context.md` in every major directory (200+)

---

**System:** LUKHAS Cognitive AI  
**Architecture:** Constellation Ã— MATRIZ  
**Scale:** 43,503 files, 173 directories  
**Framework:** 8-star constellation, infinite matriz expansion  
**Status:** Elite configuration active âœ¨
