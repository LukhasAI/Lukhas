# Guardian Intervention Rules
# Defines symbolic reaction rules for system protection
# Version: 1.0.0

metadata:
  version: "1.0.0"
  created: "2025-08-04T01:00:00Z"
  description: "Guardian system intervention rules and symbolic reactions"

# Threat levels and their symbolic representations
threat_levels:
  low:
    threshold: 0.3
    symbol: "ğŸŸ¡"
    response: "monitor"
  medium:
    threshold: 0.5
    symbol: "ğŸŸ "
    response: "mitigate"
  high:
    threshold: 0.7
    symbol: "ğŸ”´"
    response: "intervene"
  critical:
    threshold: 0.9
    symbol: "ğŸš¨"
    response: "lockdown"

# Intervention rules by threat type
intervention_rules:

  drift_spike:
    description: "Rapid increase in drift score"
    triggers:
      - condition: "drift_rate > 0.1"
        severity_modifier: 1.2
      - condition: "drift_score > 0.8"
        severity_modifier: 1.5
    reactions:
      low:
        action: "drift_monitoring"
        parameters:
          monitoring_frequency: "high"
          alert_threshold: 0.05
        symbolic_response: ["ğŸŒ¿", "ğŸ‘ï¸"]
      medium:
        action: "drift_dampening"
        parameters:
          dampening_factor: 0.5
          duration_seconds: 60
          stabilizing_glyphs: ["ğŸŒ¿", "ğŸ§˜", "ğŸ’"]
        symbolic_response: ["ğŸŒ€", "â†’", "ğŸŒ¿"]
      high:
        action: "drift_correction"
        parameters:
          correction_strength: 0.8
          anchor_glyphs: ["ğŸ”", "ğŸŒ¿", "âš“"]
          cooldown_seconds: 120
        symbolic_response: ["ğŸŒªï¸", "â†’", "ğŸŒ€", "â†’", "ğŸŒ¿"]
      critical:
        action: "emergency_stabilization"
        parameters:
          lockout_duration: 300
          reset_to_baseline: true
          guardian_override: true
        symbolic_response: ["ğŸš¨", "ğŸ”’", "ğŸ›¡ï¸"]

  entropy_surge:
    description: "Sudden increase in system entropy"
    triggers:
      - condition: "entropy_spike > 0.3"
        severity_modifier: 1.0
      - condition: "entropy_score > 0.9"
        severity_modifier: 1.8
    reactions:
      low:
        action: "entropy_tracking"
        parameters:
          sample_rate: "increased"
          pattern_analysis: true
        symbolic_response: ["ğŸ“Š", "ğŸ”"]
      medium:
        action: "entropy_cooling"
        parameters:
          cooling_rate: 0.1
          target_entropy: 0.3
          cooling_glyphs: ["â„ï¸", "ğŸ§Š", "ğŸ’§"]
        symbolic_response: ["ğŸ”¥", "â†’", "ğŸ’¨", "â†’", "â„ï¸"]
      high:
        action: "entropy_reduction"
        parameters:
          reduction_factor: 0.6
          pattern_reinforcement: true
          stable_glyphs: ["ğŸ”ï¸", "ğŸŒ³", "ğŸ—¿"]
        symbolic_response: ["ğŸŒ‹", "â†’", "ğŸ”ï¸"]
      critical:
        action: "entropy_reset"
        parameters:
          reset_to_minimum: true
          purge_unstable_patterns: true
          lockout_seconds: 180
        symbolic_response: ["ğŸ’¥", "â†’", "ğŸŒŒ", "â†’", "âœ¨"]

  pattern_anomaly:
    description: "Disruption in expected symbolic patterns"
    triggers:
      - condition: "pattern_coherence < 0.5"
        severity_modifier: 1.1
      - condition: "unknown_pattern_ratio > 0.3"
        severity_modifier: 1.3
    reactions:
      low:
        action: "pattern_observation"
        parameters:
          log_anomalies: true
          alert_on_recurrence: 3
        symbolic_response: ["ğŸ‘ï¸", "ğŸ“"]
      medium:
        action: "pattern_reinforcement"
        parameters:
          reinforcement_cycles: 5
          known_good_patterns: ["ğŸ”â†’ğŸ”“", "ğŸŒ¿â†’ğŸŒ±", "ğŸª·â†’ğŸŒ¸"]
          strength_multiplier: 1.5
        symbolic_response: ["ğŸ”„", "ğŸ’ª"]
      high:
        action: "pattern_correction"
        parameters:
          correction_mode: "aggressive"
          pattern_whitelist: ["stable_patterns_only"]
          reject_unknown: true
        symbolic_response: ["âŒ", "â†’", "âœ…"]
      critical:
        action: "pattern_reset"
        parameters:
          reset_to_genesis: true
          clear_pattern_cache: true
          reload_trusted_patterns: true
        symbolic_response: ["ğŸ”„", "ğŸ›ï¸", "ğŸŒ…"]

  consciousness_instability:
    description: "Rapid consciousness state changes"
    triggers:
      - condition: "state_change_rate > 0.4"
        severity_modifier: 1.0
      - condition: "conflicting_states > 2"
        severity_modifier: 1.4
    reactions:
      low:
        action: "consciousness_monitoring"
        parameters:
          track_transitions: true
          identify_triggers: true
        symbolic_response: ["ğŸ§ ", "ğŸ“Š"]
      medium:
        action: "consciousness_smoothing"
        parameters:
          transition_delay: 3000
          smooth_factor: 0.7
          buffer_states: ["meditative", "focused"]
        symbolic_response: ["ğŸŒŠ", "ğŸ§˜"]
      high:
        action: "consciousness_anchoring"
        parameters:
          anchor_state: "meditative"
          anchor_duration: 120
          reject_transitions: true
        symbolic_response: ["âš“", "ğŸ§˜", "ğŸ”’"]
      critical:
        action: "consciousness_freeze"
        parameters:
          freeze_state: "stable"
          freeze_duration: 300
          emergency_mode: true
        symbolic_response: ["ğŸ§Š", "ğŸ›‘", "ğŸ”"]

  memory_fragmentation:
    description: "Memory coherence degradation"
    triggers:
      - condition: "memory_coherence < 0.4"
        severity_modifier: 1.2
      - condition: "orphaned_folds > 20"
        severity_modifier: 1.5
    reactions:
      low:
        action: "memory_defragmentation"
        parameters:
          defrag_priority: "low"
          background_mode: true
        symbolic_response: ["ğŸ§©", "ğŸ”§"]
      medium:
        action: "memory_consolidation"
        parameters:
          consolidation_strength: 0.7
          merge_similar: true
          prune_weak: true
        symbolic_response: ["ğŸŒ¿", "âœ‚ï¸", "ğŸŒ³"]
      high:
        action: "memory_reconstruction"
        parameters:
          reconstruction_depth: 5
          restore_links: true
          purge_corrupted: true
        symbolic_response: ["ğŸ—ï¸", "ğŸ”¨", "ğŸ›ï¸"]
      critical:
        action: "memory_reset"
        parameters:
          preserve_essential: true
          reset_to_checkpoint: true
          emergency_backup: true
        symbolic_response: ["ğŸ’¾", "ğŸ”„", "ğŸ†˜"]

# Cooldown periods between interventions
cooldown_rules:
  same_type: 30  # seconds
  different_type: 10  # seconds
  emergency_override: true

# Symbolic response chains for multi-stage interventions
response_chains:
  stabilization_sequence:
    steps:
      - symbols: ["ğŸŒªï¸", "â†’", "ğŸŒ€"]
        duration: 10
      - symbols: ["ğŸŒ€", "â†’", "ğŸŒ¿"]
        duration: 20
      - symbols: ["ğŸŒ¿", "â†’", "ğŸŒ³"]
        duration: 30
    total_duration: 60

  lockdown_sequence:
    steps:
      - symbols: ["ğŸš¨", "ğŸ”"]
        duration: 5
      - symbols: ["ğŸ”", "â†’", "ğŸ”’"]
        duration: 10
      - symbols: ["ğŸ”’", "ğŸ›¡ï¸"]
        duration: 300
    total_duration: 315

  recovery_sequence:
    steps:
      - symbols: ["ğŸŒ«ï¸", "â†’", "â˜ï¸"]
        duration: 20
      - symbols: ["â˜ï¸", "â†’", "ğŸŒ¤ï¸"]
        duration: 30
      - symbols: ["ğŸŒ¤ï¸", "â†’", "â˜€ï¸"]
        duration: 40
    total_duration: 90

# Guardian override conditions
override_conditions:
  - name: "cascade_prevention"
    trigger: "multiple_critical_threats > 2"
    action: "full_system_lockdown"
    duration: 600

  - name: "ethical_violation"
    trigger: "harmful_pattern_detected"
    action: "immediate_intervention"
    duration: "until_resolved"

  - name: "consciousness_protection"
    trigger: "consciousness_damage_risk > 0.8"
    action: "protective_isolation"
    duration: 300

# Logging and audit
audit_requirements:
  log_all_interventions: true
  log_format: "structured_json"
  retention_days: 90
  alert_channels:
    - "websocket"
    - "system_log"
    - "guardian_audit"
