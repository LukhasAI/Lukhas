{
  "schema_version": "1.0.0",
  "module": "core.registry",
  "owner": {
    "team": "Core",
    "codeowners": [
      "@gonzo.dominguez",
      "@lukhas-core"
    ]
  },
  "interface": {
    "public_api": [
      {
        "fn": "PluginRegistry",
        "stability": "stable",
        "doc": "Public API: PluginRegistry"
      },
      {
        "fn": "PluginBase",
        "stability": "stable",
        "doc": "Public API: PluginBase"
      },
      {
        "fn": "PluginInfo",
        "stability": "stable",
        "doc": "Public API: PluginInfo"
      },
      {
        "fn": "LUKHASPlugin",
        "stability": "stable",
        "doc": "Public API: LUKHASPlugin"
      },
      {
        "fn": "get_plugin_registry",
        "stability": "experimental",
        "doc": "Public API: get_plugin_registry"
      },
      {
        "fn": "register_plugin",
        "stability": "experimental",
        "doc": "Public API: register_plugin"
      },
      {
        "fn": "register",
        "stability": "stable",
        "doc": "Public API: register"
      },
      {
        "fn": "resolve",
        "stability": "stable",
        "doc": "Public API: resolve"
      },
      {
        "fn": "autoload",
        "stability": "stable",
        "doc": "Public API: autoload"
      },
      {
        "fn": "discover_entry_points",
        "stability": "experimental",
        "doc": "Public API: discover_entry_points"
      }
    ],
    "contracts": [
      {
        "name": "module_initialization",
        "type": "postcondition",
        "desc": "Module initializes without errors"
      }
    ]
  },
  "params": {
    "log_level": {
      "type": "string",
      "default": "INFO",
      "enum": [
        "DEBUG",
        "INFO",
        "WARN",
        "ERROR"
      ]
    },
    "enable_telemetry": {
      "type": "bool",
      "default": true
    }
  },
  "gates": [
    {
      "metric": "security.osv_high",
      "op": "==",
      "value": 0
    },
    {
      "metric": "symbolic.DriftScore",
      "op": ">=",
      "value": 0.01
    },
    {
      "metric": "attestation.rats_verified",
      "op": "==",
      "value": 1
    },
    {
      "metric": "latency.runtime_s_10k",
      "op": "<=",
      "value": 10
    }
  ],
  "telemetry": {
    "opentelemetry_semconv_version": "1.37.0",
    "spans": [
      {
        "name": "registry.operation",
        "attrs": [
          "code.function",
          "lukhas.module",
          "lukhas.registry.operation"
        ]
      }
    ],
    "metrics": [
      {
        "name": "lukhas.registry.latency",
        "unit": "s",
        "type": "histogram"
      },
      {
        "name": "lukhas.registry.operations",
        "unit": "1",
        "type": "counter"
      }
    ],
    "coverage_percentage": 70
  },
  "symbolic_diagnostics": {
    "CollapseHash": "sha256:pending",
    "DriftScore": 0.01,
    "EthicalDriftIndex": 0.0,
    "ConvergencePct": 0.0
  },
  "lineage": {
    "openlineage_event_id": "urn:uuid:57973039-5e42-8396-22ae-e9bce1550729",
    "datasets_in": [],
    "datasets_out": [],
    "job": "lukhas.registry.pipeline"
  },
  "provenance": {
    "@context": "https://www.w3.org/ns/prov.jsonld",
    "commit": "pending",
    "branch": "main",
    "built_by": {
      "prov:agent": "matrix_bootstrap_all.py"
    },
    "environment": {
      "os": "pending",
      "cpu": "pending",
      "python": "3.11+"
    },
    "config_fingerprint": "sha256:pending"
  },
  "causal_provenance": {
    "ipld_root_cid": "bafybeigdyrzt5sfp7udm7hu76uh7y26nf3efuylqabf3oclgtqy55fbzdi",
    "car_uri": "ipfs://pending/registry.car",
    "lamport_time": 0,
    "vector_clock": {
      "registry": 0,
      "consciousness": 0,
      "identity": 0
    },
    "bft": {
      "algorithm": "hotstuff",
      "view": 0,
      "qc_hash": "0x0000000000000000"
    },
    "crdt": {
      "type": "or-set",
      "last_join_cid": "bafybeipending"
    }
  },
  "formal": {
    "tla_plus": {
      "spec": "specs/registry/module.tla",
      "result": "UNKNOWN"
    },
    "proofs": [],
    "probabilistic": {
      "tool": "prism",
      "model": "models/registry/behavior.pm",
      "properties": [
        "P>=0.99 [F \"module_ready\"]"
      ]
    }
  },
  "privacy": {
    "epsilon": 0.0,
    "delta": 0.0,
    "mechanism": "gaussian",
    "composition": "basic"
  },
  "attestation": {
    "rats": {
      "evidence_jwt": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",
      "verifier_policy": {
        "ref": "rats/policy-v2.1.json",
        "version": "v2.1"
      }
    },
    "tee": [],
    "ebpf": {
      "program_id": "sha256:pending",
      "policy": "opa://policies/registry.rego"
    }
  },
  "crypto": {
    "pqc": {
      "signatures": [
        "ML-DSA-65"
      ],
      "kem": "ML-KEM-1024",
      "hash": "SHA3-512"
    }
  },
  "verifiable_claims": {
    "zk": {
      "scheme": "groth16",
      "circuit_cid": null,
      "proof_uri": null,
      "vk_uri": null,
      "setup": {
        "pot_round": null,
        "ref": null
      }
    },
    "mpc": {
      "protocol": "spdz",
      "threshold": "2/3",
      "participants": 3
    }
  },
  "capabilities": {
    "macaroons": [],
    "policy_engine": "opa",
    "policy_packages": [
      "matrix.registry"
    ]
  },
  "experiments": {
    "mlflow_tracking_uri": "mlflow://lukhas",
    "last_run_id": null,
    "dvc_metrics_ref": "../dvc_metrics/registry.json"
  },
  "energy": {
    "tool": "codecarbon",
    "last_kwh_10k": null,
    "last_emissions_kg": null,
    "location": "US-CA",
    "artifact": "../artifacts/registry_emissions.csv"
  },
  "supply_chain": {
    "sbom_ref": "../sbom/registry.cdx.json",
    "licenses": [
      "Apache-2.0"
    ],
    "sarif_report": "../artifacts/registry.sarif.json",
    "osv_snapshot": "../artifacts/registry.osv.json",
    "attestations": [
      {
        "type": "slsa.provenance",
        "uri": "oci://registry/lukhas/registry@sha256:pending"
      }
    ],
    "reproducible": true
  },
  "tokenization": {
    "enabled": false,
    "network": "solana",
    "standard": "solana:compressed-nft",
    "mint_address": null,
    "token_id": null,
    "anchor_txid": null,
    "anchor_block": null,
    "anchor_digest": null,
    "anchor_merkle_root": null,
    "issuer": null,
    "policy_version": null,
    "proof_uri": null,
    "note": null
  },
  "identity": {
    "requires_auth": true,
    "accepted_subjects": [
      "lukhas:user:*",
      "lukhas:svc:orchestrator",
      "lukhas:svc:guardian",
      "lukhas:svc:consciousness"
    ],
    "required_tiers": [
      "inner_circle",
      "root_dev"
    ],
    "required_tiers_numeric": [
      4,
      5
    ],
    "scopes": [
      "registry.read",
      "registry.write",
      "registry.admin"
    ],
    "webauthn_required": true,
    "api_policies": []
  },
  "docs": {
    "lens_markdown": "../products/intelligence/lens/registry.qmd",
    "design_notes": "../docs/registry/architecture.md"
  }
}