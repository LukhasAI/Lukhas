[1m============================= test session starts ==============================[0m
platform darwin -- Python 3.9.6, pytest-8.4.1, pluggy-1.6.0 -- /Users/agi_dev/LOCAL-REPOS/Lukhas/.venv/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.9.6', 'Platform': 'macOS-26.0-arm64-arm-64bit', 'Packages': {'pytest': '8.4.1', 'pluggy': '1.6.0'}, 'Plugins': {'Faker': '37.5.3', 'html': '4.1.1', 'asyncio': '1.1.0', 'json-report': '1.5.0', 'metadata': '3.1.1', 'anyio': '4.10.0', 'cov': '6.2.1', 'mock': '3.14.1', 'benchmark': '5.1.0'}}
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /Users/agi_dev/LOCAL-REPOS/Lukhas
configfile: pytest.ini
testpaths: tests
plugins: Faker-37.5.3, html-4.1.1, asyncio-1.1.0, json-report-1.5.0, metadata-3.1.1, anyio-4.10.0, cov-6.2.1, mock-3.14.1, benchmark-5.1.0
asyncio: mode=auto, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
[1mcollecting ... [0mcollected 450 items / 10 errors / 4 skipped

<Dir Lukhas>
  <Package tests>
    <Package api>
      <Module test_enhanced_api.py>
        Test suite for enhanced LUKHAS API system
        <Class TestEnhancedAPI>
          Test enhanced API functionality
          <Function test_health_endpoint>
            Test health check endpoint
          <Function test_auth_required>
            Test that endpoints require authentication
          <Coroutine test_consciousness_query>
            Test consciousness query endpoint
          <Coroutine test_memory_operations>
            Test memory CRUD operations
          <Coroutine test_governance_check>
            Test governance/ethics checking
          <Coroutine test_dream_generation>
            Test creative content generation
          <Coroutine test_generic_process_endpoint>
            Test generic process endpoint
          <Coroutine test_capabilities_endpoint>
            Test system capabilities endpoint
          <Coroutine test_metrics_endpoint>
            Test system metrics endpoint
          <Coroutine test_error_handling>
            Test API error handling
          <Coroutine test_request_tracking>
            Test request tracking middleware
        <Class TestLUKHASClient>
          Test LUKHAS API client SDK
          <Coroutine test_client_initialization>
            Test client initialization
          <Coroutine test_consciousness_client>
            Test consciousness client methods
          <Coroutine test_memory_client>
            Test memory client methods
          <Coroutine test_error_handling>
            Test client error handling
          <Coroutine test_auth_client>
            Test authentication client
          <Coroutine test_system_client>
            Test system information client
    <Dir branding>
      <Module test_lukhas_import_alias.py>
        <Function test_lukhas_import_alias_branding_module>
    <Dir consciousness>
      <Module test_natural_language_interface.py>
        Test Suite for Natural Language Consciousness Interface
        ======================================================
        Tests for conversational consciousness system interaction.
        <Class TestNaturalLanguageInterface>
          Test natural language consciousness interface
          <Coroutine test_initialization>
            Test interface initialization
          <Coroutine test_intent_detection>
            Test intent detection from natural language
          <Coroutine test_entity_extraction>
            Test entity extraction from user input
          <Coroutine test_emotion_analysis>
            Test emotion analysis of user input
          <Coroutine test_awareness_query_processing>
            Test processing awareness queries
          <Coroutine test_decision_processing>
            Test decision-making request processing
          <Coroutine test_memory_exploration>
            Test memory exploration requests
          <Coroutine test_emotional_check>
            Test emotional state queries
          <Coroutine test_dream_request>
            Test dream/creative requests
          <Coroutine test_reality_exploration>
            Test alternative reality exploration
          <Coroutine test_conversation_context>
            Test conversation context management
          <Coroutine test_tone_application>
            Test emotional tone application to responses
          <Coroutine test_error_handling>
            Test error response generation
          <Coroutine test_glyph_handling>
            Test GLYPH token handling
          <Coroutine test_conversation_manager>
            Test conversation manager functionality
          <Coroutine test_session_cleanup>
            Test old session cleanup
          <Coroutine test_confidence_calculation>
            Test confidence calculation for intent detection
          <Coroutine test_nlu_pipeline>
            Test complete NLU pipeline
      <Module test_parallel_reality_simulator.py>
        Test Suite for Parallel Reality Simulator
        ========================================
        Tests for the enhanced parallel reality simulation system.
        <Class TestParallelRealitySimulator>
          Test parallel reality simulator functionality
          <Coroutine test_initialization>
            Test simulator initialization
          <Coroutine test_create_simulation>
            Test creating new simulation
          <Coroutine test_explore_branch>
            Test exploring reality branches
          <Coroutine test_collapse_reality>
            Test collapsing parallel realities
          <Coroutine test_merge_realities>
            Test merging multiple reality branches
          <Coroutine test_reality_types>
            Test different reality type generation
          <Coroutine test_glyph_communication>
            Test GLYPH token handling
          <Coroutine test_ethical_validation>
            Test ethical score integration
          <Coroutine test_memory_integration>
            Test memory storage integration
          <Coroutine test_performance_metrics>
            Test performance metric tracking
          <Coroutine test_error_handling>
            Test error handling scenarios
          <Coroutine test_process_interface>
            Test process interface method
          <Coroutine test_status_reporting>
            Test status reporting
    <Package core>
      <Module test_decision_explainer.py>
        Tests for the LUKHAS Decision Explainability Framework
        <Class TestDecisionFactor>
          Test DecisionFactor functionality
          <Function test_factor_creation>
            Test creating a decision factor
        <Class TestDecisionExplanation>
          Test DecisionExplanation functionality
          <Function test_explanation_creation>
            Test creating a decision explanation
          <Function test_summary_level_explanation>
            Test summary level human-readable output
          <Function test_standard_level_explanation>
            Test standard level human-readable output
          <Function test_detailed_level_explanation>
            Test detailed level human-readable output
        <Class TestDecisionExplainer>
          Test the main DecisionExplainer class
          <Function test_explainer_initialization>
            Test explainer initializes correctly
          <Coroutine test_explain_simple_decision>
            Test explaining a simple decision
          <Coroutine test_causal_explanation>
            Test generating causal explanations
          <Coroutine test_comparative_explanation>
            Test generating comparative explanations
          <Coroutine test_counterfactual_explanation>
            Test generating counterfactual explanations
          <Coroutine test_factor_analysis>
            Test factor analysis in decisions
          <Coroutine test_hormonal_influence>
            Test hormonal state influence on explanations
          <Function test_decision_report_generation>
            Test generating reports from multiple explanations
          <Coroutine test_convenience_functions>
            Test the convenience functions
          <Function test_error_handling>
            Test error handling in explanations
          <Coroutine test_dmb_style_explanation>
            Test explaining decisions in DMB style format
      <Module test_endocrine_system.py>
        Tests for the LUKHAS Endocrine System
        <Class TestHormoneLevel>
          Test hormone level functionality
          <Function test_hormone_level_initialization>
            Test hormone level creates with correct defaults
          <Function test_hormone_decay>
            Test hormone decays towards baseline
          <Function test_hormone_bounds>
            Test hormone levels stay within bounds
        <Class TestEndocrineSystem>
          Test the endocrine system
          <Function test_system_initialization>
            Test endocrine system initializes correctly
          <Function test_hormone_interactions>
            Test hormone interactions work correctly
          <Function test_stress_response>
            Test stress response trigger
          <Function test_reward_response>
            Test reward response trigger
          <Function test_social_bonding>
            Test social bonding response
          <Function test_rest_cycle>
            Test rest cycle trigger
          <Function test_calculate_effects>
            Test effect calculation
          <Function test_neuroplasticity_calculation>
            Test neuroplasticity calculation
          <Function test_dominant_state_detection>
            Test dominant hormonal state detection
          <Function test_hormone_profile>
            Test comprehensive hormone profile generation
          <Function test_receptor_registration>
            Test module receptor registration
          <Coroutine test_update_loop>
            Test the update loop runs correctly
          <Function test_global_convenience_functions>
            Test global convenience functions
          <Function test_hormone_summary_generation>
            Test human-readable summary generation
      <Module test_tag_registry.py>
        Tests for the LUKHAS Tag Registry System
        <Class TestTagRegistry>
          Test the tag registry functionality
          <Function test_registry_initialization>
            Test that registry initializes with core tags
          <Function test_tag_categories>
            Test tag categorization
          <Function test_tag_relationships>
            Test parent-child and related tag relationships
          <Function test_get_related_tags>
            Test getting related tags with depth
          <Function test_explain_tag>
            Test human-readable tag explanations
          <Function test_get_hormone_tags>
            Test getting all hormone tags
          <Function test_get_decision_tags>
            Test getting decision-relevant tags
          <Function test_tag_priority>
            Test tag priority system
          <Function test_tag_confidence_requirements>
            Test confidence requirements for tags
          <Function test_tag_effects_and_triggers>
            Test tag triggers and effects
          <Function test_custom_tag_registration>
            Test registering custom tags
          <Function test_tag_report_generation>
            Test comprehensive tag report
          <Function test_explain_unknown_tag>
            Test explaining unknown tag
    <Package critical_path>
      <Module test_consciousness_flows.py>
        üß† Consciousness System Critical Path Tests
        ===========================================
        Tests critical consciousness flows and decision-making paths.
        <Class TestConsciousnessCorePaths>
          Test core consciousness system paths
          <Function test_consciousness_imports>
            Test that consciousness components import correctly
          <Coroutine test_awareness_assessment_path>
            Test awareness assessment critical path
          <Coroutine test_decision_making_path>
            Test decision-making critical path
          <Function test_consciousness_interfaces_available>
            Test consciousness interface availability
        <Class TestConsciousnessIntegrationPaths>
          Test consciousness integration with other systems
          <Coroutine test_consciousness_memory_integration>
            Test consciousness-memory integration path
          <Coroutine test_consciousness_guardian_integration>
            Test consciousness-guardian system integration path
        <Class TestConsciousnessPerformancePaths>
          Test consciousness performance critical paths
          <Coroutine test_rapid_decision_making>
            Test rapid decision-making path
          <Coroutine test_concurrent_awareness_processing>
            Test concurrent awareness processing path
        <Class TestConsciousnessAdaptationPaths>
          Test consciousness adaptation and learning paths
          <Coroutine test_learning_adaptation_path>
            Test consciousness learning and adaptation path
          <Coroutine test_pattern_recognition_path>
            Test pattern recognition in consciousness
        <Class TestConsciousnessErrorHandling>
          Test consciousness error handling paths
          <Coroutine test_decision_failure_recovery>
            Test decision failure recovery path
          <Coroutine test_awareness_degradation_handling>
            Test awareness degradation handling path
      <Module test_guardian_flows.py>
        üõ°Ô∏è Guardian System Critical Path Tests
        ======================================
        Tests critical Guardian system flows and ethical validation paths.
        <Class TestGuardianSystemCorePaths>
          Test core Guardian system paths
          <Function test_guardian_imports>
            Test that Guardian components import correctly
          <Coroutine test_ethical_validation_path>
            Test ethical validation critical path
          <Coroutine test_drift_detection_path>
            Test behavioral drift detection path
          <Function test_guardian_interfaces_available>
            Test Guardian interface availability
        <Class TestGuardianEthicalFrameworks>
          Test ethical framework critical paths
          <Coroutine test_virtue_ethics_path>
            Test virtue ethics evaluation path
          <Coroutine test_consequentialist_ethics_path>
            Test consequentialist ethics evaluation path
          <Coroutine test_deontological_ethics_path>
            Test deontological ethics evaluation path
        <Class TestGuardianIntegrationPaths>
          Test Guardian integration with other systems
          <Coroutine test_guardian_consciousness_integration>
            Test Guardian-consciousness integration path
          <Coroutine test_guardian_memory_protection>
            Test Guardian memory protection path
        <Class TestGuardianPerformancePaths>
          Test Guardian performance critical paths
          <Coroutine test_real_time_validation_path>
            Test real-time validation performance path
          <Coroutine test_concurrent_validations_path>
            Test concurrent validations performance path
        <Class TestGuardianErrorHandlingPaths>
          Test Guardian error handling paths
          <Coroutine test_validation_failure_recovery>
            Test validation failure recovery path
          <Coroutine test_ethical_conflict_resolution>
            Test ethical conflict resolution path
      <Module test_memory_flows.py>
        üß† Memory System Critical Path Tests
        ====================================
        Tests critical memory flows and DNA helix functionality.
        <Class TestMemoryDNAHelixPath>
          Test DNA helix memory critical paths
          <Function test_dna_helix_imports>
            Test that DNA helix components import correctly
          <Function test_symbolic_strand_creation>
            Test symbolic strand creation and operations
          <Coroutine test_memory_helix_storage_retrieval>
            Test memory helix storage and retrieval path
          <Coroutine test_drift_detection_path>
            Test memory drift detection critical path
        <Class TestMemorySystemIntegration>
          Test memory system integration paths
          <Coroutine test_memory_interface_registration>
            Test memory interface registration path
          <Function test_memory_type_enum_path>
            Test memory type enumeration access path
          <Coroutine test_memory_orchestrator_initialization_path>
            Test memory orchestrator initialization critical path
        <Class TestMemoryPerformancePaths>
          Test memory performance critical paths
          <Function test_memory_vector_operations>
            Test memory vector operations path
          <Coroutine test_memory_concurrent_access_path>
            Test concurrent memory access path
        <Class TestMemoryErrorRecoveryPaths>
          Test memory error recovery paths
          <Coroutine test_memory_corruption_detection>
            Test memory corruption detection path
          <Coroutine test_memory_repair_mechanisms>
            Test memory repair mechanisms path
      <Module test_system_integration.py>
        üß™ Critical Path Integration Tests
        ==================================
        Tests core system flows and integration paths.
        <Class TestCoreSystemIntegration>
          Test critical paths through core systems
          <Coroutine test_memory_consciousness_integration>
            Test memory and consciousness integration path
          <Coroutine test_guardian_system_validation_path>
            Test Guardian system validation critical path
          <Coroutine test_glyph_token_processing_path>
            Test GLYPH token processing through system
          <Function test_interface_availability>
            Test that all critical interfaces are available
          <Function test_common_utilities_available>
            Test that common utilities are accessible
        <Class TestCriticalSystemPaths>
          Test end-to-end critical system paths
          <Coroutine test_memory_storage_retrieval_path>
            Test complete memory storage and retrieval path
          <Coroutine test_consciousness_decision_path>
            Test consciousness decision-making path
          <Function test_module_imports_critical_path>
            Test that critical modules can be imported without errors
        <Class TestErrorHandlingPaths>
          Test error handling in critical paths
          <Coroutine test_dependency_injection_fallback>
            Test fallback behavior when services aren't available
          <Function test_interface_error_handling>
            Test interface error handling
    <Package e2e>
      <Module test_e2e_workflows.py>
        End-to-End tests for LUKHAS complete workflows
        Tests full user scenarios across all systems
        <Class TestUserWorkflows>
          Test complete user interaction workflows
          <Coroutine test_philosophical_inquiry_workflow>
            Test complete philosophical inquiry workflow
          <Coroutine test_learning_workflow>
            Test learning and knowledge retention workflow
          <Coroutine test_creative_collaboration_workflow>
            Test creative collaboration workflow
          <Coroutine test_problem_solving_workflow>
            Test problem-solving workflow
        <Class TestSystemResilience>
          Test system resilience and error recovery
          <Coroutine test_cascade_failure_prevention>
            Test prevention of cascade failures
          <Coroutine test_circular_dependency_handling>
            Test handling of circular dependencies
          <Coroutine test_resource_exhaustion_protection>
            Test protection against resource exhaustion
        <Class TestPerformanceScenarios>
          Test performance under various scenarios
          <Coroutine test_high_load_performance>
            Test performance under high load
          <Coroutine test_memory_scaling_performance>
            Test memory system performance at scale
        <Class TestSecurityScenarios>
          Test security scenarios
          <Coroutine test_injection_attack_prevention>
            Test prevention of injection attacks
          <Coroutine test_privacy_protection>
            Test privacy protection mechanisms
          <Coroutine test_authorization_boundaries>
            Test authorization boundaries
    <Package governance>
      <Module test_ai_compliance_framework.py>
        Test Suite for AI Regulatory Compliance Framework
        ================================================
        
        Comprehensive tests for all compliance components including:
        - EU AI Act compliance validation
        - GDPR data protection validation
        - NIST AI Risk Management Framework
        - Global compliance orchestration
        <Class TestAIComplianceFramework>
          Test cases for AI Regulatory Compliance Framework
          <Function test_eu_ai_act_validator_initialization>
            Test EU AI Act validator initialization
          <Coroutine test_eu_ai_act_compliance_assessment>
            Test EU AI Act compliance assessment
          <Coroutine test_nist_risk_assessment>
            Test NIST AI Risk Management assessment
          <Coroutine test_global_compliance_assessment>
            Test global compliance orchestration
          <Coroutine test_compliance_report_generation>
            Test compliance report generation
          <Function test_framework_compatibility>
            Test framework compatibility matrix
          <Coroutine test_error_handling>
            Test error handling in compliance framework
      <Module test_compliance_integration.py>
        AI Compliance Framework Integration Test
        ======================================
        
        Simple integration test to validate the AI compliance framework components.
        <Function test_imports>
          Test that all compliance framework modules can be imported
        <Coroutine test_eu_ai_act>
          Test EU AI Act compliance validator
        <Coroutine test_gdpr>
          Test GDPR compliance validator
        <Coroutine test_nist>
          Test NIST AI Risk Management Framework
        <Coroutine test_global_compliance>
          Test Global Compliance Engine
      <Module test_enhanced_governance.py>
        üß™ EnhanceWM Governance Test Suite
        =====================================
        
        Tests the superior ethics and red team integrated governance system.
        <Coroutine test_enhanced_governance>
          Test enhanced governance with superior ethics.
        <Coroutine test_basic_governance>
          Test basic governance as fallback.
      <Module test_governance.py>
        ÔøWM Governance Test Script
        =============================
        
        Quick test to validate the governance integration.
        <Coroutine test_governance>
          Test basic governance functionality.
      <Module test_hybrid_session_keys.py>
        Test script for hybrid session key generation (BLAKE3 + SHAKE256)
        Tests the dual-key approach for internal speed and external trust
        <Coroutine test_hybrid_session_keys>
          Test the hybrid BLAKE3 + SHAKE256 session key generation
      <Module test_session_key_direct.py>
        Direct test of hybrid session key generation without full handshake
        <Function test_session_key_generation>
          Test the hybrid session key generation directly
    <Package identity>
      <Module test_oauth2_oidc_provider.py>
        üîê OAuth2/OIDC Provider Test Suite
        =================================
        
        Comprehensive unit tests for LUKHAS OAuth2/OIDC authorization server.
        Tests OAuth2 flows, OpenID Connect, JWT tokens, and Trinity Framework compliance.
        
        Trinity Framework: ‚öõÔ∏è (Identity), üß† (Consciousness), üõ°Ô∏è (Guardian)
        <Class TestOAuthClient>
          Test OAuth client data structure
          <Function test_oauth_client_creation>
            Test OAuthClient creation and serialization
          <Function test_oauth_client_defaults>
            Test OAuthClient with minimal data
        <Class TestOAuth2OIDCProvider>
          Test suite for OAuth2/OIDC authorization server
          <Function test_oauth_provider_initialization>
            Test OAuth2/OIDC provider initialization
          <Function test_get_authorization_endpoint_metadata>
            Test OAuth2/OIDC server metadata (RFC 8414)
          <Function test_handle_authorization_request_valid>
            Test valid OAuth2 authorization request handling
          <Function test_handle_authorization_request_invalid_client>
            Test authorization request with invalid client
          <Function test_handle_authorization_request_invalid_redirect_uri>
            Test authorization request with invalid redirect URI
          <Function test_handle_authorization_request_unsupported_response_type>
            Test authorization request with unsupported response type
          <Function test_handle_authorization_request_scope_filtering>
            Test scope filtering based on user tier and client permissions
          <Function test_handle_authorization_request_no_valid_scopes>
            Test authorization request with no valid scopes for user tier
          <Function test_handle_token_request_authorization_code_flow>
            Test token request for authorization code flow
          <Function test_handle_token_request_invalid_authorization_code>
            Test token request with invalid authorization code
          <Function test_handle_token_request_invalid_client_credentials>
            Test token request with invalid client credentials
          <Function test_handle_token_request_pkce_validation>
            Test PKCE validation in token request
          <Function test_handle_token_request_refresh_token_flow>
            Test refresh token flow
          <Function test_handle_token_request_client_credentials_flow>
            Test client credentials flow
          <Function test_introspect_token_valid>
            Test token introspection with valid token
          <Function test_introspect_token_invalid>
            Test token introspection with invalid token
          <Function test_introspect_token_expired>
            Test token introspection with expired token
          <Function test_get_userinfo_valid>
            Test UserInfo endpoint with valid access token
          <Function test_get_userinfo_insufficient_scope>
            Test UserInfo endpoint without openid scope
          <Function test_get_userinfo_invalid_token>
            Test UserInfo endpoint with invalid token
          <Function test_get_jwks>
            Test JWKS (JSON Web Key Set) endpoint
          <Function test_register_client>
            Test OAuth2 client registration (RFC 7591)
          <Function test_register_client_missing_redirect_uris>
            Test client registration without redirect URIs
          <Function test_tier_based_scope_restrictions>
            Test tier-based scope filtering
          <Function test_constitutional_validation>
            Test Trinity Framework constitutional validation (üõ°Ô∏è Guardian)
          <Function test_implicit_flow>
            Test OAuth2 implicit flow
          <Function test_id_token_implicit_flow>
            Test OpenID Connect implicit flow for ID token
          <Function test_oauth_performance_requirements>
            Test OAuth2/OIDC operations meet performance requirements
          <Function test_trinity_framework_integration>
            Test Trinity Framework integration (‚öõÔ∏èüß†üõ°Ô∏è)
      <Module test_tier_validation.py>
        üîí Tier Validation System Test Suite
        ===================================
        
        Comprehensive unit tests for LUKHAS tier validation system (Tiers 0-5).
        Tests the tier-based access control, permissions, and Trinity Framework compliance.
        
        Trinity Framework: ‚öõÔ∏è (Identity), üß† (Consciousness), üõ°Ô∏è (Guardian)
        <Class TestTierValidationSystem>
          Test suite for tier validation system (Tiers 0-5)
          <Function test_access_tier_enum_values>
            Test AccessTier enum has correct values
          <Function test_tier_glyph_mappings>
            Test tier-specific glyph mappings
          <Function test_tier_permissions_matrix>
            Test tier permissions matrix is correctly configured
          <Function test_resolve_access_tier_basic>
            Test basic tier resolution from metadata
          <Function test_resolve_access_tier_invalid_tier>
            Test tier resolution with invalid tier string
          <Function test_resolve_access_tier_missing_tier>
            Test tier resolution with missing tier field
          <Function test_resolve_access_tier_consent_restrictions>
            Test tier resolution with consent restrictions
          <Function test_resolve_access_tier_drift_score_monitoring>
            Test tier resolution with drift score monitoring
          <Function test_resolve_access_tier_trinity_score_elevation>
            Test tier elevation based on Trinity score
          <Function test_resolve_access_tier_cultural_profile>
            Test tier resolution with cultural profile considerations
          <Function test_tier_validation_performance>
            Test tier validation performance requirements
          <Function test_tier_based_token_creation>
            Test token creation with different tiers
          <Function test_tier_glyph_generation>
            Test glyph generation respects tier requirements
          <Function test_tier_symbolic_integrity_validation>
            Test symbolic integrity validation for different tiers
          <Function test_tier_permission_hierarchy>
            Test that tier permissions follow hierarchical inheritance
          <Function test_error_handling_in_tier_resolution>
            Test error handling in tier resolution
          <Function test_trinity_framework_compliance>
            Test Trinity Framework compliance across all tiers (‚öõÔ∏èüß†üõ°Ô∏è)
          <Function test_tier_based_feature_flags>
            Test tier-based feature flag behavior
      <Module test_webauthn_fido2.py>
        üîê WebAuthn/FIDO2 Manager Test Suite
        ===================================
        
        Comprehensive unit tests for LUKHAS WebAuthn/FIDO2 authentication manager.
        Tests passwordless authentication, biometric integration, and Trinity Framework compliance.
        
        Trinity Framework: ‚öõÔ∏è (Identity), üß† (Consciousness), üõ°Ô∏è (Guardian)
        <Class TestWebAuthnCredential>
          Test WebAuthn credential data structure
          <Function test_webauthn_credential_creation>
            Test WebAuthnCredential creation and serialization
          <Function test_webauthn_credential_defaults>
            Test WebAuthnCredential with minimal data
        <Class TestWebAuthnManager>
          Test suite for WebAuthn/FIDO2 authentication manager
          <Function test_webauthn_manager_initialization>
            Test WebAuthn manager initialization
          <Function test_generate_registration_options_basic>
            Test basic WebAuthn registration options generation
          <Function test_generate_registration_options_different_tiers>
            Test registration options for different user tiers
          <Function test_generate_registration_options_with_existing_credentials>
            Test registration options generation with existing credentials
          <Function test_verify_registration_response_valid>
            Test valid WebAuthn registration response verification
          <Function test_verify_registration_response_invalid_registration_id>
            Test registration verification with invalid registration ID
          <Function test_verify_registration_response_expired>
            Test registration verification with expired registration
          <Function test_verify_registration_response_challenge_mismatch>
            Test registration verification with challenge mismatch
          <Function test_generate_authentication_options_basic>
            Test basic WebAuthn authentication options generation
          <Function test_generate_authentication_options_with_credentials>
            Test authentication options with existing credentials
          <Function test_verify_authentication_response_valid>
            Test valid WebAuthn authentication response verification
          <Function test_verify_authentication_response_credential_not_found>
            Test authentication verification with unknown credential
          <Function test_get_user_credentials>
            Test getting user credentials
          <Function test_revoke_credential>
            Test credential revocation
          <Function test_device_type_determination>
            Test device type determination from WebAuthn response
          <Function test_constitutional_validation>
            Test Trinity Framework constitutional validation (üõ°Ô∏è Guardian)
          <Function test_webauthn_health_check>
            Test WebAuthn system health check
          <Function test_webauthn_performance_requirements>
            Test WebAuthn operations meet performance requirements (<100ms p95)
          <Function test_tier_based_authenticator_requirements>
            Test tier-based authenticator requirements
          <Function test_consciousness_integration>
            Test üß† Consciousness integration for security analysis
          <Function test_trinity_framework_integration>
            Test Trinity Framework integration (‚öõÔ∏èüß†üõ°Ô∏è)
    <Package integration>
      <Module test_agent_coordination.py>
        Integration tests for 6-agent LUKHAS AI coordination
        Tests the interfaces and contracts between all agents
        <Class TestAgentCoordination>
          Test suite for multi-agent integration
          <Function test_identity_consent_integration>
            Test that auth events generate audit records
          <Function test_adapter_consent_validation>
            Test that adapters check consent before external access
          <Function test_orchestrator_policy_enforcement>
            Test policy engine invocation at each workflow step
          <Function test_capability_token_flow>
            Test capability token generation and validation
          <Function test_audit_event_schema>
            Test audit event generation with Œõ-trace
          <Function test_duress_gesture_response>
            Test system locks and alerts on duress gesture
          <Function test_mvp_demo_scenario>
            Test complete MVP demo workflow end-to-end
      <Module test_core_integration.py>
        LUKHAS Core Systems Integration Tests
        Comprehensive testing of all core modules working together
        <Class TestCoreSystemIntegration>
          Test integration between core LUKHAS systems
          <Coroutine test_consciousness_memory_integration>
            Test consciousness queries create memories
          <Coroutine test_guardian_consciousness_integration>
            Test Guardian validates consciousness responses
          <Coroutine test_emotion_consciousness_integration>
            Test emotion affects consciousness state
          <Coroutine test_dream_memory_integration>
            Test dream generation uses and creates memories
          <Coroutine test_symbolic_consciousness_integration>
            Test symbolic encoding in consciousness
          <Coroutine test_full_system_orchestration>
            Test all systems working together in complex scenario
        <Class TestSystemPerformance>
          Test performance of integrated systems
          <Coroutine test_consciousness_query_performance>
            Test consciousness query performance
          <Coroutine test_memory_operations_performance>
            Test memory system performance
          <Coroutine test_concurrent_operations>
            Test system performance under concurrent load
        <Class TestErrorHandling>
          Test error handling in integrated systems
          <Coroutine test_consciousness_memory_error_recovery>
            Test recovery when memory system fails during consciousness query
          <Coroutine test_guardian_override_handling>
            Test handling when Guardian blocks operation
          <Coroutine test_circular_dependency_prevention>
            Test prevention of circular dependencies between systems
        <Class TestDataConsistency>
          Test data consistency across systems
          <Coroutine test_timestamp_consistency>
            Test all systems use consistent timestamps
          <Coroutine test_data_format_consistency>
            Test consistent data formats across systems
      <Module test_feedback_integration.py>
        Test Suite for Feedback Integration
        ===================================
        Tests for the integrated feedback collection and interpretability system.
        <Class TestFeedbackCollection>
          Test feedback collection functionality
          <Coroutine test_rating_feedback>
            Test rating feedback collection
          <Coroutine test_emoji_feedback>
            Test emoji feedback collection
          <Coroutine test_text_feedback_with_sentiment>
            Test text feedback with sentiment analysis
          <Coroutine test_quick_feedback>
            Test quick thumbs up/down feedback
          <Coroutine test_feedback_rate_limiting>
            Test rate limiting prevents spam
          <Coroutine test_compliance_regions>
            Test compliance region handling
        <Class TestFeedbackManagement>
          Test feedback editing and deletion
          <Coroutine test_edit_feedback>
            Test editing feedback
          <Coroutine test_delete_feedback>
            Test soft deletion of feedback
          <Coroutine test_ownership_validation>
            Test users can only edit/delete their own feedback
        <Class TestFeedbackAggregation>
          Test feedback aggregation and summaries
          <Coroutine test_action_feedback_summary>
            Test aggregating feedback for an action
          <Coroutine test_user_feedback_history>
            Test retrieving user feedback history
          <Coroutine test_feedback_report_generation>
            Test generating feedback reports
        <Class TestDashboardIntegration>
          Test dashboard integration with feedback
          <Coroutine test_decision_tracking_with_feedback>
            Test tracking decisions and integrating feedback
          <Coroutine test_feedback_influence_tracking>
            Test tracking how feedback influences decisions
          <Coroutine test_real_time_dashboard_updates>
            Test real-time dashboard updates with feedback
        <Class TestComplianceFeatures>
          Test GDPR and compliance features
          <Coroutine test_user_data_export>
            Test exporting all user data
          <Coroutine test_data_retention_cleanup>
            Test automatic cleanup of old feedback
          <Coroutine test_anonymization>
            Test feedback anonymization
        <Class TestAPIIntegration>
          Test API-level integration
          <Coroutine test_integrated_chat_with_feedback>
            Test integrated chat API with feedback
          <Coroutine test_feedback_widgets>
            Test feedback widget rendering
      <Module test_full_system_flow.py>
        Full System Integration Test
        =============================
        Demonstrates that all enhanced features work together as a cohesive whole.
        Tests the complete flow from input through all systems to output.
        <Class TestFullSystemIntegration>
          Test complete system integration
          <Coroutine test_end_to_end_cognitive_flow>
            Test complete cognitive processing flow through all systems
          <Coroutine test_symbol_flow_across_modules>
            Test that symbols flow correctly between all modules
          <Coroutine test_consensus_with_quantum_voting>
            Test advanced consensus with quantum superposition voting
          <Coroutine test_memory_performance>
            Test memory system performance optimizations
      <Module test_lukhas_ai_setup.py>
        üé≠ Quick test of your LUKHAS AI integration setup
        
        üåà This script tests all your available AI tools and shows how they work together
        with LUKHAS patterns and Trinity Framework.
        
        üéì Tests:
        - Ollama local model functionality
        - LUKHAS knowledge server
        - Trinity documentation generation
        - VS Code extension readiness
        <Function test_ollama>
          Test Ollama local model availability
        <Function test_lukhas_knowledge_server>
          Test LUKHAS knowledge server
        <Function test_vs_code_extensions>
          Test VS Code AI extensions
        <Function test_desktop_apps>
          Test desktop AI applications
        <Function test_claude_config>
          Test Claude Desktop configuration
      <Module test_openai_connection.py>
        OpenAI API Connection Test
        Tests the OpenAI API key and connection before running stress tests
        <Function test_openai_connection>
          Test OpenAI API connection
    <Package memory>
      <Module test_dna_helix.py>
        Tests for DNA Helix Immutable Memory Architecture
        <Class TestSymbolicStrand>
          Test symbolic strand functionality
          <Function test_strand_creation>
            Test creating symbolic strands
          <Function test_strand_immutability>
            Test that strands are immutable
          <Function test_entropy_calculation>
            Test entropy calculation
          <Function test_hash_generation>
            Test cryptographic hash generation
          <Function test_distance_calculation>
            Test distance calculations between strands
        <Class TestDNAHealixCore>
          Test DNA helix core functionality
          <Function test_helix_creation>
            Test creating DNA helix core
          <Function test_drift_calculation>
            Test drift calculation methods
          <Function test_repair_methods>
            Test different repair methods
          <Function test_consensus_repair>
            Test consensus-based repair
          <Function test_repair_history>
            Test repair history tracking
        <Class TestSymbolicRepairLoop>
          Test automatic repair loop
          <Coroutine test_repair_loop_start_stop>
            Test starting and stopping repair loop
          <Coroutine test_auto_repair>
            Test automatic repair functionality
        <Class TestMemoryHelix>
          Test complete memory helix system
          <Function test_memory_creation>
            Test creating memory helix
          <Function test_memory_access>
            Test memory access tracking
          <Function test_memory_mutation>
            Test memory mutation
          <Function test_memory_contexts>
            Test adding different context strands
          <Function test_memory_locking>
            Test GDPR-compliant memory locking
          <Function test_memory_export_import>
            Test memory export and import
        <Class TestHelixVault>
          Test helix vault functionality
          <Coroutine test_vault_creation>
            Test creating vault
          <Coroutine test_memory_management>
            Test memory creation and retrieval
          <Coroutine test_search_functionality>
            Test vault search capabilities
          <Coroutine test_persistence>
            Test vault persistence
          <Coroutine test_drift_oracle>
            Test drift oracle functionality
      <Module test_dna_memory_architecture.py>
        Tests for DNA Helix Memory Architecture
        ========================================
        Verify immutability, temporal evolution, and causal chains.
        <Class TestCognitiveState>
          Test cognitive state operations
          <Function test_state_initialization>
            Test default cognitive state values
          <Function test_state_to_vector>
            Test conversion to numpy vector
          <Function test_state_entropy>
            Test entropy calculation
        <Class TestMemoryNode>
          Test memory node operations
          <Function test_node_creation>
            Test creating a memory node
          <Function test_node_integrity>
            Test node integrity verification
          <Function test_node_evolution>
            Test node evolution (immutable)
          <Function test_node_importance>
            Test importance calculation
        <Class TestMemoryLink>
          Test memory link operations
          <Function test_link_creation>
            Test creating memory links
          <Function test_link_strengthen_weaken>
            Test link strength changes
        <Class TestDNAHelixMemory>
          Test DNA helix memory system
          <Function test_memory_initialization>
            Test memory system initialization
          <Function test_add_node>
            Test adding nodes to memory
          <Function test_create_link>
            Test creating links between nodes
          <Function test_retrieve_by_similarity>
            Test similarity-based retrieval
          <Function test_trace_causal_chain>
            Test tracing causal chains
          <Function test_decay_application>
            Test temporal decay on links
          <Function test_memory_statistics>
            Test memory statistics
          <Function test_singleton_instance>
            Test singleton memory instance
        <Class TestDNAMemoryIntegration>
          Integration tests for DNA memory with other systems
          <Function test_memory_with_evolution_chain>
            Test complex evolution chain with reflections
          <Function test_memory_capacity_management>
            Test memory cleanup when at capacity
    <Package security>
      <Module test_enhanced_security.py>
        Test suite for enhanced security implementation
        Tests real cryptography, MFA, and secure authentication
        <Class TestEnhancedCrypto>
          Test enhanced cryptography
          <Coroutine test_aes_encryption>
            Test AES-256-GCM encryption
          <Coroutine test_chacha20_encryption>
            Test ChaCha20-Poly1305 encryption
          <Coroutine test_authenticated_encryption>
            Test AEAD with associated data
          <Coroutine test_json_encryption>
            Test JSON data encryption
          <Function test_key_derivation>
            Test key derivation functions
          <Coroutine test_key_rotation>
            Test key rotation
          <Function test_constant_time_compare>
            Test constant-time comparison
        <Class TestEnhancedAuth>
          Test enhanced authentication
          <Function test_jwt_generation>
            Test JWT token generation
          <Function test_jwt_expiry>
            Test JWT expiration
          <Function test_jwt_revocation>
            Test JWT revocation
          <Coroutine test_session_management>
            Test session creation and validation
          <Coroutine test_totp_mfa>
            Test TOTP-based MFA
          <Coroutine test_sms_mfa>
            Test SMS-based MFA
          <Coroutine test_backup_codes>
            Test backup code functionality
          <Coroutine test_rate_limiting>
            Test authentication rate limiting
          <Function test_api_key_management>
            Test API key generation and verification
        <Class TestSecurityIntegration>
          Test integrated security system
          <Coroutine test_module_encryption_hooks>
            Test module-specific encryption hooks
          <Coroutine test_secure_session_creation>
            Test secure session with MFA requirement
          <Coroutine test_request_validation>
            Test request validation with security checks
          <Coroutine test_api_key_validation>
            Test API key validation in requests
          <Coroutine test_xor_replacement>
            Test that XOR encryption is properly replaced
      <Module test_red_team_integration.py>
        Red Team Framework Integration Tests
        ===================================
        
        Comprehensive integration tests for the entire Red Team security framework.
        Tests all components working together to validate AI system security.
        <Function test_red_team_framework_integration>
          Test complete Red Team framework integration
        <Coroutine test_red_team_workflow>
          Test complete Red Team workflow
    <Dir stress>
      <Module test_dream_orchestrator_simple.py>
        Simple test for Enhanced Dream Orchestrator
        Quick validation without hanging issues
        <Coroutine test_dream_orchestrator_improvements>
          Test Dream Orchestrator improvements from 77% to 95%
      <Module test_enhanced_orchestrator.py>
        Test script for Enhanced Dream Orchestrator
        Tests the improvements from dependency injection and graceful degradation
        <Coroutine test_enhanced_orchestrator>
          Test the enhanced orchestrator with comprehensive scenarios
      <Module test_vendor_portal_fixed.py>
        Test Vendor Portal async/await fixes
        Validates improvement from 59% to 90%+ success rate
        <Coroutine test_vendor_portal_improvements>
          Test Vendor Portal improvements from 59% to 90%+
    <Module test_adaptive_features.py>
      Test suite for LUKHAS Adaptive AI Features
      Tests the endocrine system, feedback cards, personal symbols, and audit trail
      <UnitTestCase TestEndocrineSystem>
        Test the AI endocrine system
        <TestCaseFunction test_cooldown_mechanism>
          Test hormone cooldown periods
        <TestCaseFunction test_signal_emission>
          Test that signals are emitted correctly
      <UnitTestCase TestPromptModulation>
        Test signal-to-prompt modulation
        <TestCaseFunction test_combined_signals>
          Test combining multiple signals
        <TestCaseFunction test_novelty_modulation>
          Test that novelty increases creativity
        <TestCaseFunction test_stress_modulation>
          Test that stress reduces temperature
      <UnitTestCase TestFeedbackCards>
        Test the feedback card system
        <TestCaseFunction test_create_rating_card>
          Test creating a rating feedback card
        <TestCaseFunction test_impact_calculation>
          Test impact score calculation
        <TestCaseFunction test_submit_feedback>
          Test submitting feedback
      <UnitTestCase TestPersonalSymbols>
        Test personal symbol dictionary
        <TestCaseFunction test_add_symbol>
          Test adding a personal symbol
        <TestCaseFunction test_interpret_symbols>
          Test interpreting text with symbols
        <TestCaseFunction test_symbol_evolution>
          Test symbol confidence evolution
      <UnitTestCase TestAuditTrail>
        Test the audit trail system
        <TestCaseFunction test_decision_explanation>
          Test generating explanations
        <TestCaseFunction test_log_decision>
          Test logging a decision
        <TestCaseFunction test_session_trail>
          Test retrieving session audit trail
      <UnitTestCase TestOptimizedCache>
        Test the caching optimization
        <TestCaseFunction test_exact_match_cache>
          Test exact match caching
      <UnitTestCase TestIntegration>
        Test integration of all components
        <TestCaseFunction test_full_flow>
          Test complete adaptive flow
    <Module test_admin_dashboard.py>
      <Function test_admin_overview_renders>
      <Function test_admin_exports>
      <Function test_admin_requires_api_key>
    <Module test_all_new_implementations.py>
      Comprehensive Test Suite for All New Implementations
      =====================================================
      Tests all newly created components: Signal Bus, Homeostasis Controller,
      Modulator, Feedback System, and Environment Validator.
      <Function test_env_validator>
        Test environment variable validation
      <Coroutine test_signal_bus_comprehensive>
        Comprehensive signal bus tests
      <Coroutine test_homeostasis_comprehensive>
        Comprehensive homeostasis controller tests
      <Function test_modulator_comprehensive>
        Comprehensive prompt modulator tests
      <Function test_adaptive_modulator>
        Test adaptive learning in modulator
      <Function test_feedback_system_comprehensive>
        Comprehensive feedback system tests
      <Coroutine test_full_integration>
        Test full integration of all components
    <Module test_audit_trail.py>
      Test suite for Enterprise Audit Trail System
      Tests core audit functionality with updated imports
      <Coroutine test_basic_event_logging>
        Test basic event logging functionality
      <Coroutine test_consciousness_transition_logging>
        Test consciousness state transition logging
      <Coroutine test_decision_chain_logging>
        Test decision chain logging for explainability
      <Coroutine test_security_event_logging>
        Test security event logging
      <Coroutine test_event_query>
        Test querying audit events
      <Coroutine test_audit_decorators>
        Test audit decorators for automatic logging
      <Coroutine test_compliance_report_generation>
        Test compliance report generation
      <Coroutine test_analytics_summary>
        Test real-time analytics summary
      <Function test_audit_event_integrity>
        Test event checksum integrity
    <Module test_backup_manifest.py>
      <Function test_backup_manifest_schema>
      <Function test_last_success_placeholder>
    <Module test_colony_dna_integration.py>
      <Function test_consensus_persists_to_dna_with_strength_and_version>
      <Function test_higher_version_wins>
      <Function test_lower_version_does_not_overwrite>
    <Module test_colony_integration.py>
      Complete Colony Integration Test Suite
      ======================================
      Tests the full integration of colony systems with Signal Bus,
      Personal Symbol Dictionary, Universal Exchange, and GPT orchestration.
      <Class TestSignalBusIntegration>
        Test Signal Bus integration
        <Function test_signal_bus_creation>
          Test basic signal bus functionality
        <Function test_signal_subscription>
          Test signal subscription mechanism
        <Function test_homeostasis_controller>
          Test homeostasis oscillation detection
      <Class TestColonyIntegration>
        Test Colony system integration
        <Coroutine test_enhanced_colony_creation>
          Test enhanced colony with signal integration
        <Coroutine test_colony_consensus_mechanisms>
          Test different consensus mechanisms
        <Coroutine test_hormone_based_consensus>
          Test hormone-influenced consensus
      <Class TestSymbolDictionary>
        Test Personal Symbol Dictionary
        <Function test_symbol_dictionary_creation>
          Test creating personal symbol dictionary
        <Function test_gesture_mapping>
          Test gesture to symbol mapping
        <Function test_symbol_evolution>
          Test symbol evolution based on feedback
      <Class TestUniversalExchange>
        Test Universal Symbol Exchange
        <Coroutine test_exchange_session>
          Test creating exchange session
        <Coroutine test_privacy_preserving_exchange>
          Test privacy-preserving symbol exchange
      <Class TestGPTColonyOrchestration>
        Test GPT-Colony Orchestration
        <Coroutine test_orchestrator_creation>
          Test creating GPT-Colony orchestrator
        <Coroutine test_parallel_orchestration>
          Test parallel GPT-Colony processing
        <Coroutine test_competitive_orchestration>
          Test competitive orchestration mode
      <Class TestFullIntegration>
        Test complete system integration
        <Coroutine test_full_system_integration>
          Test all components working together
    <Module test_comprehensive_monitoring.py>
      Comprehensive Enhanced Monitoring System Test Suite
      =================================================
      Tests all capabilities of the biological-inspired monitoring system
      <Class TestComprehensiveMonitoringSystem>
        Comprehensive test suite for all monitoring capabilities
        <Coroutine test_endocrine_observability_engine>
          Test EndocrineObservabilityEngine capabilities
        <Coroutine test_plasticity_trigger_manager>
          Test PlasticityTriggerManager adaptation decisions
        <Coroutine test_bio_symbolic_coherence_monitor>
          Test BioSymbolicCoherenceMonitor alignment tracking
        <Coroutine test_adaptive_metrics_collector>
          Test AdaptiveMetricsCollector context awareness
        <Coroutine test_hormone_driven_dashboard>
          Test HormoneDrivenDashboard predictions and alerts
        <Coroutine test_neuroplastic_learning_orchestrator>
          Test NeuroplasticLearningOrchestrator system learning
        <Coroutine test_adaptive_threshold_calculations>
          Test adaptive threshold calculation algorithms
        <Coroutine test_real_data_integration>
          Test real data integration from LUKHAS  modules
        <Coroutine test_performance_and_load>
          Test system performance under load
        <Coroutine test_complete_integration_flow>
          Test complete end-to-end integration flow
    <Module test_drift_diagnostics.py>
      <Function test_calculate_drift_score>
      <Function test_generate_entropy_map_from_memory>
      <Function test_detect_collapse_points>
      <Function test_get_diagnostics_summary_keys>
    <Module test_dual_write_flags.py>
      <Function test_dual_write_toggle>
    <Module test_entropy_monitoring.py>
      Test Entropy Monitoring - Integration test for Shannon entropy tracking and drift detection
      Validates symbolic state transitions and Guardian intervention triggers
      <Class TestEntropyMonitoring>
        Integration tests for entropy monitoring and drift detection
        <Function test_shannon_entropy_calculation>
          Test Shannon entropy calculation with symbolic transitions
        <Function test_drift_class_assignment>
          Test drift class assignment based on entropy levels
        <Function test_symbolic_state_transitions>
          Test symbolic state transition validation and glyph sequences
        <Function test_guardian_intervention_triggers>
          Test Guardian system intervention trigger conditions
        <Function test_entropy_journal_persistence>
          Test entropy journal persistence and data integrity
        <Function test_consciousness_state_entropy_correlation>
          Test correlation between consciousness states and entropy levels
        <Function test_drift_pattern_recognition>
          Test pattern recognition in drift sequences
    <Module test_feature_flags.py>
      Test Feature Flags System
      =========================
      <Function test_default_flags>
        Test default flag values
      <Function test_override>
        Test flag override functionality
      <Function test_env_override>
        Test environment variable override
      <Function test_decorator>
        Test when_enabled decorator
      <Function test_require_feature>
        Test require_feature guard
      <Function test_get_enabled_features>
        Test getting list of enabled features
    <Module test_feedback_loop.py>
      Test the Symbolic Feedback Loop
      <Coroutine test_feedback_loop_stability>
        Test function to verify feedback loop stability.
        Runs the loop through various scenarios and measures convergence.
    <Module test_flags_integration.py>
      Integration tests for feature flags in core code paths
      ========================================================
      Verifies that FLAG_* environment variables properly control:
      - Browser tool availability (FLAG_BROWSER_TOOL)
      - Strict safety mode default (FLAG_STRICT_DEFAULT)
      - Tool analytics logging (FLAG_TOOL_ANALYTICS)
      <Function test_browser_tool_flag>
        Test FLAG_BROWSER_TOOL gates browser tool availability
      <Function test_strict_default_flag>
        Test FLAG_STRICT_DEFAULT forces strict safety mode
      <Function test_tool_analytics_flag>
        Test FLAG_TOOL_ANALYTICS controls analytics logging
      <Function test_analytics_incident_logging>
        Test that incident logging respects FLAG_TOOL_ANALYTICS
      <Function test_flag_combinations>
        Test various flag combinations work together

==================================== ERRORS ====================================
[31m[1m______________ ERROR collecting tests/api/test_commercial_api.py _______________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/api/test_commercial_api.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/api/test_commercial_api.py:6: in <module>
    from serve.main import app
serve/main.py:10: in <module>
    from .openai_routes import router as openai_router
serve/openai_routes.py:8: in <module>
    from bridge.llm_wrappers.openai_modulated_service import OpenAIModulatedService
bridge/llm_wrappers/openai_modulated_service.py:26: in <module>
    from lukhas.branding.terminology import normalize_chunk, normalize_output
E   ModuleNotFoundError: No module named 'lukhas.branding'[0m
[31m[1m_____________ ERROR collecting tests/branding/test_terminology.py ______________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/branding/test_terminology.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/branding/test_terminology.py:1: in <module>
    from lukhas.branding.terminology import normalize_output
E   ModuleNotFoundError: No module named 'lukhas.branding'[0m
[31m[1m________ ERROR collecting tests/bridge/test_openai_modulated_service.py ________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/bridge/test_openai_modulated_service.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/bridge/test_openai_modulated_service.py:3: in <module>
    from bridge.llm_wrappers.openai_modulated_service import OpenAIModulatedService
bridge/llm_wrappers/openai_modulated_service.py:26: in <module>
    from lukhas.branding.terminology import normalize_chunk, normalize_output
E   ModuleNotFoundError: No module named 'lukhas.branding'[0m
[31m[1m_______ ERROR collecting tests/integration/test_complete_openai_flow.py ________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/integration/test_complete_openai_flow.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/integration/test_complete_openai_flow.py:14: in <module>
    from bridge.llm_wrappers.openai_modulated_service import OpenAIModulatedService
bridge/llm_wrappers/openai_modulated_service.py:26: in <module>
    from lukhas.branding.terminology import normalize_chunk, normalize_output
E   ModuleNotFoundError: No module named 'lukhas.branding'[0m
[31m[1m_________ ERROR collecting tests/integration/test_final_integration.py _________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/integration/test_final_integration.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/integration/test_final_integration.py:15: in <module>
    from bridge.llm_wrappers.openai_modulated_service import run_modulated_completion
bridge/llm_wrappers/openai_modulated_service.py:26: in <module>
    from lukhas.branding.terminology import normalize_chunk, normalize_output
E   ModuleNotFoundError: No module named 'lukhas.branding'[0m
[31m[1m_________ ERROR collecting tests/integration/test_openai_responses.py __________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/integration/test_openai_responses.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/integration/test_openai_responses.py:14: in <module>
    from bridge.llm_wrappers.openai_modulated_service import OpenAIModulatedService
bridge/llm_wrappers/openai_modulated_service.py:26: in <module>
    from lukhas.branding.terminology import normalize_chunk, normalize_output
E   ModuleNotFoundError: No module named 'lukhas.branding'[0m
[31m[1m______________ ERROR collecting tests/serve/test_openai_routes.py ______________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/serve/test_openai_routes.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/serve/test_openai_routes.py:3: in <module>
    from serve.main import app
serve/main.py:10: in <module>
    from .openai_routes import router as openai_router
serve/openai_routes.py:8: in <module>
    from bridge.llm_wrappers.openai_modulated_service import OpenAIModulatedService
bridge/llm_wrappers/openai_modulated_service.py:26: in <module>
    from lukhas.branding.terminology import normalize_chunk, normalize_output
E   ModuleNotFoundError: No module named 'lukhas.branding'[0m
[31m[1m___________________ ERROR collecting tests/test_adapters.py ____________________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/test_adapters.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_adapters.py:14: in <module>
    from adapters.cloud_consolidation import CloudConsolidationService, ConsolidationRequest
adapters/cloud_consolidation.py:26: in <module>
    from consent.service import ConsentService
E   ModuleNotFoundError: No module named 'consent.service'[0m
[31m[1m____________________ ERROR collecting tests/test_consent.py ____________________[0m
[31mImportError while importing test module '/Users/agi_dev/LOCAL-REPOS/Lukhas/tests/test_consent.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_consent.py:13: in <module>
    from consent.api import router as consent_router
E   ModuleNotFoundError: No module named 'consent.api'[0m
[31m[1m_____________________ ERROR collecting tests/test_gtpsi.py _____________________[0m
[1m[31mtests/test_gtpsi.py[0m:34: in <module>
    [0m[94mfrom[39;49;00m[90m [39;49;00m[04m[96mgtpsi[39;49;00m[04m[96m.[39;49;00m[04m[96mstudio_hooks[39;49;00m[90m [39;49;00m[94mimport[39;49;00m ConsentUIRequest, StudioGTŒ®Hooks[90m[39;49;00m
[1m[31mgtpsi/studio_hooks.py[0m:387: in <module>
    [0m[94masync[39;49;00m [94mdef[39;49;00m[90m [39;49;00m[92mrequest_consent_ui[39;49;00m([90m[39;49;00m
[1m[31m.venv/lib/python3.9/site-packages/fastapi/routing.py[0m:995: in decorator
    [0m[96mself[39;49;00m.add_api_route([90m[39;49;00m
[1m[31m.venv/lib/python3.9/site-packages/fastapi/routing.py[0m:934: in add_api_route
    [0mroute = route_class([90m[39;49;00m
[1m[31m.venv/lib/python3.9/site-packages/fastapi/routing.py[0m:555: in __init__
    [0m[96mself[39;49;00m.dependant = get_dependant(path=[96mself[39;49;00m.path_format, call=[96mself[39;49;00m.endpoint)[90m[39;49;00m
[1m[31m.venv/lib/python3.9/site-packages/fastapi/dependencies/utils.py[0m:285: in get_dependant
    [0mparam_details = analyze_param([90m[39;49;00m
[1m[31m.venv/lib/python3.9/site-packages/fastapi/dependencies/utils.py[0m:488: in analyze_param
    [0mfield = create_model_field([90m[39;49;00m
[1m[31m.venv/lib/python3.9/site-packages/fastapi/utils.py[0m:98: in create_model_field
    [0m[94mraise[39;49;00m fastapi.exceptions.FastAPIError([90m[39;49;00m
[1m[31mE   fastapi.exceptions.FastAPIError: Invalid args for response field! Hint: check that <class 'gtpsi.studio_hooks.StudioGTŒ®Hooks'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/[0m
[33m=============================== warnings summary ===============================[0m
bridge/llm_wrappers/tool_executor.py:10
  /Users/agi_dev/LOCAL-REPOS/Lukhas/bridge/llm_wrappers/tool_executor.py:10: DeprecationWarning: Namespace notice: `lukhas` is kept for compatibility; please migrate imports to `lukhas`.
    from lukhas.tools.tool_executor import get_tool_executor

quantum/core/quantum_processor_enhanced.py:34
  /Users/agi_dev/LOCAL-REPOS/Lukhas/quantum/core/quantum_processor_enhanced.py:34: UserWarning: Qiskit not available. Using numpy-based quantum simulation.
    warnings.warn("Qiskit not available. Using numpy-based quantum simulation.")

gtpsi/server/verify.py:44
  /Users/agi_dev/LOCAL-REPOS/Lukhas/gtpsi/server/verify.py:44: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.9/migration/
    @validator('nonce')

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
[36m[1m=========================== short test summary info ============================[0m
[33mSKIPPED[0m [1] tests/identity/test_identity_integration.py:38: Identity components not available: No module named 'qrcode'
[33mSKIPPED[0m [1] tests/identity/test_identity_performance.py:38: Identity components not available: No module named 'qrcode'
[33mSKIPPED[0m [1] tests/identity/test_identity_security.py:38: Identity components not available: No module named 'qrcode'
[33mSKIPPED[0m [1] tests/identity/test_qr_entropy_generation.py:30: QREntropyGenerator not available
[31mERROR[0m tests/api/test_commercial_api.py
[31mERROR[0m tests/branding/test_terminology.py
[31mERROR[0m tests/bridge/test_openai_modulated_service.py
[31mERROR[0m tests/integration/test_complete_openai_flow.py
[31mERROR[0m tests/integration/test_final_integration.py
[31mERROR[0m tests/integration/test_openai_responses.py
[31mERROR[0m tests/serve/test_openai_routes.py
[31mERROR[0m tests/test_adapters.py
[31mERROR[0m tests/test_consent.py
[31mERROR[0m tests/test_gtpsi.py - fastapi.exceptions.FastAPIError: Invalid args for response field! Hint: che...
[31m!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 10 failures !!!!!!!!!!!!!!!!!!!!!!!!!![0m
[31m=================== [32m450 tests collected[0m, [31m10 errors[0m[31m in 4.96s[0m[31m ====================[0m
