[tool:pytest]
# CI-optimized pytest configuration for LUKHAS AI
minversion = 8.0
testpaths = tests
pythonpath = .

# Test discovery
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# CI-specific options
addopts =
    --strict-markers
    --disable-warnings
    --tb=short
    --maxfail=10
    --timeout=300
    --dist=worksteal
    -n auto

# Test markers for tiered execution
markers =
    smoke: Quick smoke tests (<30s)
    fast: Fast tests for CI (<5 min)
    unit: Unit tests
    integration: Integration tests
    contract: API contract tests
    tier1: Tier 1 critical tests
    property_based: Property-based testing
    chaos_engineering: Chaos engineering tests
    metamorphic: Metamorphic testing
    formal_verification: Formal verification tests
    mutation_testing: Mutation testing
    performance_regression: Performance regression tests
    consciousness: Consciousness system tests
    memory: Memory system tests
    identity: Identity system tests
    security: Security tests
    oauth: OAuth integration tests
    adapters: External service adapters
    slow: Long-running tests
    quarantine: Quarantined/flaky tests

# Warning filters
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore:.*streamlit.*:UserWarning
    ignore:.*hypothesis.*:UserWarning

# Timeout settings
timeout = 300
timeout_method = thread
