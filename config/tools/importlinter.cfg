[importlinter]
root_package = lukhas

[contract:accepted_must_not_import_nonaccepted]
name = accepted must not import candidate/quarantine/archive
type = forbidden
source_modules =
    lukhas
forbidden_modules =
    candidate
    quarantine
    archive

[contract:matriz_lane_boundary_enforcement]
name = MATRIZ lane boundary enforcement (Candidate→Lukhas→MATRIZ)
type = layers
layers =
    MATRIZ
    lukhas
    candidate

[contract:matriz_top_lane_isolation]
name = MATRIZ as top lane - no cross-lane imports
type = forbidden
source_modules =
    MATRIZ
forbidden_modules =
    lukhas.consciousness
    lukhas.governance
    lukhas.identity
    lukhas.orchestration
    lukhas.memory
    lukhas.observability

[contract:lukhas_cannot_import_matriz]
name = Lukhas modules cannot import MATRIZ directly
type = forbidden
source_modules =
    lukhas.consciousness
    lukhas.governance
    lukhas.identity
    lukhas.orchestration
    lukhas.memory
    lukhas.observability
forbidden_modules =
    MATRIZ

[contract:candidate_isolation]
name = Candidate lane isolation from production
type = forbidden
source_modules =
    candidate
forbidden_modules =
    lukhas.governance.guardian_serializers
    lukhas.identity.webauthn_production
    lukhas.observability.prometheus_metrics

[contract:matriz_specific_integrations]
name = MATRIZ-specific integration points allowed
type = independence
modules =
    lukhas.consciousness.matriz_thought_loop
    lukhas.observability.matriz_instrumentation
    lukhas.observability.matriz_decorators
    lukhas.memory.matriz_adapter
