#!/bin/bash

# LUKHAS AI - MongoDB Atlas Setup Guide
# GitHub Student Pack Integration
# ===================================

echo "ğŸ“ LUKHAS AI - MongoDB Atlas Organization Setup"
echo "GitHub Student Pack: $50 Credits + $150 Certification Value"
echo "========================================================="
echo ""

echo "ğŸ—ï¸ RECOMMENDED ORGANIZATION STRUCTURE:"
echo ""
echo "Organization: 'LUKHAS-AI-Student-Development'"
echo "â”œâ”€â”€ Project: 'lukhas-consciousness-dev' (Development)"
echo "â”‚   â””â”€â”€ Cluster: 'dev-consciousness-cluster' (Flex)"
echo "â”œâ”€â”€ Project: 'lukhas-consciousness-prod' (Production)" 
echo "â”‚   â””â”€â”€ Cluster: 'prod-consciousness-cluster' (Flex)"
echo "â””â”€â”€ Project: 'lukhas-research' (Research)"
echo "    â””â”€â”€ Cluster: 'research-cluster' (Flex)"
echo ""

echo "ğŸ“‹ STEP-BY-STEP SETUP:"
echo "======================"
echo ""

echo "1ï¸âƒ£ Claim GitHub Student Pack Credits"
echo "   ğŸ”— Visit: https://www.mongodb.com/students"
echo "   ğŸ‘¤ Sign in with GitHub account: LukhasAI"
echo "   ğŸ’° Get $50 promotional code"
echo "   â° Apply within 90 days"
echo ""

echo "2ï¸âƒ£ Create Organization"
echo "   ğŸ“ Name: 'LUKHAS-AI-Student-Development'"
echo "   ğŸ¯ Purpose: Educational consciousness technology development"
echo "   ğŸ”’ Billing: Apply $50 student credit here"
echo ""

echo "3ï¸âƒ£ Create Development Project"
echo "   ğŸ“ Name: 'lukhas-consciousness-dev'"
echo "   ğŸ—ï¸ Cluster: 'dev-consciousness-cluster'"
echo "   ğŸ’¾ Type: M0 Flex (Free tier + student credits)"
echo "   ğŸŒ Region: Choose closest to Azure UK South"
echo "   ğŸ”§ Sample Data: Load for testing"
echo ""

echo "4ï¸âƒ£ Create Production Project"
echo "   ğŸ“ Name: 'lukhas-consciousness-prod'"
echo "   ğŸ—ï¸ Cluster: 'prod-consciousness-cluster'"
echo "   ğŸ’¾ Type: M10 Flex (Production-ready with credits)"
echo "   ğŸŒ Region: UK South (same as Azure Container Apps)"
echo "   ğŸ“Š Analytics: Enable for consciousness metrics"
echo ""

echo "5ï¸âƒ£ Configure Security"
echo "   ğŸ‘¤ Database User: 'lukhas-consciousness-user'"
echo "   ğŸ”‘ Role: 'readWrite' on consciousness databases"
echo "   ğŸŒ Network Access: Add Azure Container Apps IPs"
echo "   ğŸ”’ Authentication: Strong password + connection string"
echo ""

echo "6ï¸âƒ£ Database Structure"
echo "   ğŸ“š Database: 'lukhas_consciousness'"
echo "   ğŸ“„ Collections:"
echo "      â€¢ conversations (user interactions)"
echo "      â€¢ memory_folds (memory system)"
echo "      â€¢ consciousness_states (system states)"
echo "      â€¢ trinity_framework (âš›ï¸ğŸ§ ğŸ›¡ï¸ data)"
echo "      â€¢ dream_sessions (creativity engine)"
echo "      â€¢ identity_contexts (Î›iD system)"
echo ""

echo "ğŸ¯ 2025 OPTIMIZATION FEATURES:"
echo "=============================="
echo ""
echo "âœ… Flex Clusters (New in 2025):"
echo "   â€¢ Cost-effective for students"
echo "   â€¢ Scales automatically"
echo "   â€¢ Perfect for consciousness data workloads"
echo ""
echo "âœ… Vector Search (Beta):"
echo "   â€¢ Semantic search in consciousness conversations"
echo "   â€¢ Memory pattern matching"
echo "   â€¢ Trinity Framework similarity queries"
echo ""
echo "âœ… Atlas Search:"
echo "   â€¢ Full-text search across consciousness data"
echo "   â€¢ Real-time indexing"
echo "   â€¢ Advanced filtering"
echo ""

echo "ğŸ’¡ LUKHAS AI SPECIFIC CONFIGURATION:"
echo "===================================="
echo ""
echo "ğŸ§  Memory Fold Collections:"
echo "   â€¢ Indexed on: importance_score, created_at, fold_type"
echo "   â€¢ TTL: Auto-archive low-importance folds"
echo "   â€¢ Cascade Prevention: 99.7% success rate"
echo ""
echo "ğŸ’¬ Conversation Collections:"
echo "   â€¢ Indexed on: session_id, consciousness_level, timestamp"
echo "   â€¢ Full-text search on: message, response"
echo "   â€¢ Analytics: Real-time consciousness metrics"
echo ""
echo "âš›ï¸ğŸ§ ğŸ›¡ï¸ Trinity Framework Collections:"
echo "   â€¢ Identity strength tracking"
echo "   â€¢ Consciousness depth measurement"
echo "   â€¢ Guardian oversight logging"
echo ""

echo "ğŸ”— CONNECTION STRINGS:"
echo "======================"
echo ""
echo "Development:"
echo "mongodb+srv://lukhas-consciousness-user:<password>@dev-consciousness-cluster.mongodb.net/lukhas_consciousness"
echo ""
echo "Production:"
echo "mongodb+srv://lukhas-consciousness-user:<password>@prod-consciousness-cluster.mongodb.net/lukhas_consciousness"
echo ""

echo "ğŸ“Š EXPECTED COSTS WITH $50 CREDIT:"
echo "=================================="
echo ""
echo "â€¢ Development Cluster (M0): FREE"
echo "â€¢ Production Cluster (M10): ~$57/month"
echo "â€¢ Research Cluster (M0): FREE"
echo "â€¢ First month: Covered by $50 credit"
echo "â€¢ Ongoing: Sustainable with project revenue"
echo ""

echo "ğŸš€ INTEGRATION WITH LUKHAS AI:"
echo "=============================="
echo ""
echo "â€¢ Update environment variables in Azure Container Apps:"
echo "  MONGODB_ATLAS_URI=<connection_string>"
echo "  MONGODB_DATABASE=lukhas_consciousness"
echo ""
echo "â€¢ Deploy consciousness store integration:"
echo "  /integrations/mongodb_consciousness_store.py"
echo ""
echo "â€¢ Enable real-time analytics in NewRelic:"
echo "  Custom events for consciousness interactions"
echo ""

echo "âœ… VERIFICATION CHECKLIST:"
echo "=========================="
echo "â–¡ Organization created with student credits applied"
echo "â–¡ Development project with M0 Flex cluster"
echo "â–¡ Production project with M10 Flex cluster"
echo "â–¡ Database users configured with proper roles"
echo "â–¡ Network access configured for Azure IPs"
echo "â–¡ Connection strings tested and secured"
echo "â–¡ Collections created with optimal indexes"
echo "â–¡ LUKHAS AI integration deployed and tested"
echo ""

echo "ğŸ“ NEXT STEPS:"
echo "=============="
echo "1. Visit https://www.mongodb.com/students to claim credits"
echo "2. Follow this guide to set up optimal organization structure"
echo "3. Test integration with LUKHAS AI consciousness store"
echo "4. Monitor usage and consciousness analytics"
echo ""
echo "ğŸ’¡ Pro Tip: Start with development cluster, then scale to production"
echo "    as your consciousness technology platform grows!"