[pytest]
addopts = -q --cov=lukhas --cov=candidate --cov-report=xml --cov-report=html --junitxml=test-results.xml
testpaths = tests
pythonpath = .
norecursedirs = LucasArchive archive _cleanup_archive .git .venv venv
xfail_strict = false
filterwarnings =
    error
    ignore::UserWarning:ethics
    ignore:Could not import lukhas.governance ethics components:UserWarning
    ignore:on_event is deprecated:DeprecationWarning
    ignore:uvloop.install\(\) is deprecated:DeprecationWarning
markers =
    asyncio: marks tests as asynchronous
    nias_transcendence: marks tests for the NIAS Transcendence system
    no_mock: marks tests as requiring no mocks (reality testing)
    block_mocks: internal marker for blocking mock usage
    audit_safe: marks tests as safe for audit environments
    no_external_calls: marks tests that make no external API calls
    security: marks security-specific tests
    integration: marks integration tests
    unit: marks unit tests
    asyncio: marks tests as async for pytest-asyncio
    nias_transcendence: marks NIAS Transcendence feature tests
