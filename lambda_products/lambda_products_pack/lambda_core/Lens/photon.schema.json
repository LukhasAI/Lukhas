{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://lukhas.ai/schemas/lens/photon.schema.json",
  "title": "Photon Document",
  "description": "A declarative schema for a no-code authored interactive scene (GLYPH Dashboard).",
  "type": "object",
  "properties": {
    "photon_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "default": "1.0.0"
    },
    "title": { "type": "string", "maxLength": 100 },
    "description": { "type": "string", "maxLength": 500 },
    "theme": {
      "type": "string",
      "enum": ["dark", "light", "system"],
      "default": "system"
    },
    "nodes": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "kind": {
            "type": "string",
            "description": "Type of GLYPH or Widget preset ID."
          },
          "label": { "type": "string" },
          "properties": { "type": "object" },
          "data_binding": {
            "type": "object",
            "properties": {
              "type": { "type": "string", "enum": ["static", "qrg_ref"] },
              "value": {}
            },
            "required": ["type"]
          },
          "access_tag": {
            "type": "string",
            "description": "Î›iD tag required for access."
          }
        },
        "required": ["id", "kind", "label"]
      }
    },
    "edges": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "source": { "type": "string", "description": "Source node ID." },
          "target": { "type": "string", "description": "Target node ID." },
          "label": { "type": "string" },
          "kind": {
            "type": "string",
            "enum": ["cites", "calls", "derives", "contains"]
          }
        },
        "required": ["id", "source", "target", "kind"]
      }
    },
    "layout": {
      "type": "object",
      "properties": {
        "positions_2d": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "properties": {
              "x": { "type": "number" },
              "y": { "type": "number" }
            },
            "required": ["x", "y"]
          }
        }
      }
    },
    "provenance": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "qrg_doc_id": { "type": "string" },
          "span": {
            "type": "array",
            "items": { "type": "integer" },
            "minItems": 2,
            "maxItems": 2
          }
        },
        "required": ["qrg_doc_id", "span"]
      }
    }
  },
  "required": ["photon_version", "title", "nodes"]
}
