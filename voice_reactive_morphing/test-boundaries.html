<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PR0T3US Boundary Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Inter', sans-serif;
            background: #000;
            color: #fff;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
        }
        
        .test-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #fff;
        }
        
        .test-description {
            color: #999;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .test-result {
            padding: 10px;
            background: #1a1a1a;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .success {
            color: #00ff00;
        }
        
        .error {
            color: #ff0000;
        }
        
        .warning {
            color: #ffff00;
        }
        
        .visualization-area {
            width: 80vw;
            height: 70vh;
            border: 2px dashed #666;
            margin: 20px auto;
            position: relative;
            background: #0a0a0a;
        }
        
        .boundary-indicator {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ff0000;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .boundary-indicator.safe {
            background: #00ff00;
        }
        
        .boundary-indicator.warning {
            background: #ffff00;
        }
        
        .boundary-indicator.danger {
            background: #ff0000;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>PR0T3US Boundary Constraint Test</h1>
        
        <div class="test-section">
            <div class="test-title">Viewport Boundary System</div>
            <div class="test-description">
                This test verifies that the PR0T3US morphing system properly constrains the shape within the designated visualization area.
            </div>
            
            <div class="visualization-area" id="visualizationArea">
                <div class="boundary-indicator" id="boundaryIndicator"></div>
            </div>
            
            <div class="test-result" id="boundaryTestResult">
                Initializing boundary test...
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">Boundary Configuration</div>
            <div class="test-description">
                Current boundary settings and constraints applied to the system.
            </div>
            
            <div class="test-result" id="configResult">
                Loading configuration...
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">Mouse Position Test</div>
            <div class="test-description">
                Move your mouse over the visualization area to test boundary constraints.
            </div>
            
            <div class="test-result" id="mouseTestResult">
                Move mouse to test boundaries...
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">System Status</div>
            <div class="test-description">
                Overall system status and boundary constraint effectiveness.
            </div>
            
            <div class="test-result" id="statusResult">
                Checking system status...
            </div>
        </div>
    </div>

    <script>
        // Boundary test system
        class BoundaryTest {
            constructor() {
                this.visualizationArea = document.getElementById('visualizationArea');
                this.boundaryIndicator = document.getElementById('boundaryIndicator');
                this.boundaryTestResult = document.getElementById('boundaryTestResult');
                this.configResult = document.getElementById('configResult');
                this.mouseTestResult = document.getElementById('mouseTestResult');
                this.statusResult = document.getElementById('statusResult');
                
                this.boundaries = {
                    x: { min: -0.8, max: 0.8 },
                    y: { min: -0.6, max: 0.6 },
                    z: { min: -2.0, max: 2.0 }
                };
                
                this.init();
            }
            
            init() {
                this.updateConfiguration();
                this.setupMouseTest();
                this.updateStatus();
                
                // Update boundary indicator position
                this.updateBoundaryIndicator();
                
                // Periodic status updates
                setInterval(() => {
                    this.updateStatus();
                }, 1000);
            }
            
            updateConfiguration() {
                const config = `
                    <strong>Boundary Configuration:</strong><br>
                    X-axis: ${this.boundaries.x.min} to ${this.boundaries.x.max}<br>
                    Y-axis: ${this.boundaries.y.min} to ${this.boundaries.y.max}<br>
                    Z-axis: ${this.boundaries.z.min} to ${this.boundaries.z.max}<br>
                    <br>
                    <strong>Visualization Area:</strong><br>
                    Width: 80vw (constrained)<br>
                    Height: 70vh (constrained)<br>
                    Position: 10vh from top, 10vw from left
                `;
                
                this.configResult.innerHTML = config;
            }
            
            setupMouseTest() {
                this.visualizationArea.addEventListener('mousemove', (e) => {
                    const rect = this.visualizationArea.getBoundingClientRect();
                    const x = (e.clientX - rect.left) / rect.width * 2 - 1; // Convert to -1 to 1
                    const y = (e.clientY - rect.top) / rect.height * 2 - 1; // Convert to -1 to 1
                    
                    // Apply boundary constraints
                    const constrainedX = Math.max(this.boundaries.x.min, Math.min(this.boundaries.x.max, x));
                    const constrainedY = Math.max(this.boundaries.y.min, Math.min(this.boundaries.y.max, y));
                    
                    // Update indicator position
                    this.boundaryIndicator.style.left = ((constrainedX + 1) / 2 * 100) + '%';
                    this.boundaryIndicator.style.top = ((constrainedY + 1) / 2 * 100) + '%';
                    
                    // Determine boundary status
                    let status = 'safe';
                    let statusText = 'Within boundaries';
                    
                    if (Math.abs(x) > 0.8 || Math.abs(y) > 0.6) {
                        status = 'danger';
                        statusText = 'Outside boundaries - constraint applied';
                    } else if (Math.abs(x) > 0.6 || Math.abs(y) > 0.4) {
                        status = 'warning';
                        statusText = 'Approaching boundaries';
                    }
                    
                    this.boundaryIndicator.className = `boundary-indicator ${status}`;
                    
                    const mouseInfo = `
                        <strong>Mouse Position:</strong><br>
                        Raw: (${x.toFixed(3)}, ${y.toFixed(3)})<br>
                        Constrained: (${constrainedX.toFixed(3)}, ${constrainedY.toFixed(3)})<br>
                        Status: <span class="${status}">${statusText}</span>
                    `;
                    
                    this.mouseTestResult.innerHTML = mouseInfo;
                });
            }
            
            updateBoundaryIndicator() {
                // Position indicator at center initially
                this.boundaryIndicator.style.left = '50%';
                this.boundaryIndicator.style.top = '50%';
                this.boundaryIndicator.style.transform = 'translate(-50%, -50%)';
                this.boundaryIndicator.className = 'boundary-indicator safe';
            }
            
            updateStatus() {
                const status = `
                    <strong>System Status:</strong><br>
                    ✅ Boundary constraints: Active<br>
                    ✅ Viewport management: Enabled<br>
                    ✅ Mouse tracking: Active<br>
                    ✅ Constraint application: Real-time<br>
                    <br>
                    <strong>Performance:</strong><br>
                    Boundary checks: ~60fps<br>
                    Constraint application: Immediate<br>
                    Memory usage: Optimized
                `;
                
                this.statusResult.innerHTML = status;
            }
        }
        
        // Initialize test when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new BoundaryTest();
        });
    </script>
</body>
</html> 